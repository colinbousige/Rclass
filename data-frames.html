<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>6 Data frames | Reproducible data treatment with R</title>
  <meta name="description" content="6 Data frames | Reproducible data treatment with R" />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="6 Data frames | Reproducible data treatment with R" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://lmi.cnrs.fr/r/" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="6 Data frames | Reproducible data treatment with R" />
  
  
  

<meta name="author" content="Colin Bousige" />


<meta name="date" content="2021-09-03" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="vectors.html"/>
<link rel="next" href="lists.html"/>
<script src="libs/header-attrs-2.7/header-attrs.js"></script>
<script src="libs/jquery-3.5.1/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/htmlwidgets-1.5.3/htmlwidgets.js"></script>
<script src="libs/plotly-binding-4.9.3/plotly.js"></script>
<script src="libs/typedarray-0.1/typedarray.min.js"></script>
<link href="libs/crosstalk-1.1.1/css/crosstalk.css" rel="stylesheet" />
<script src="libs/crosstalk-1.1.1/js/crosstalk.min.js"></script>
<link href="libs/plotly-htmlwidgets-css-1.57.1/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotly-main-1.57.1/plotly-latest.min.js"></script>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-152051691-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-152051691-1');
</script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="https://lmi.cnrs.fr/r/index.html">Reproducible data treatment with R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> About the class</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#objectives-of-the-class"><i class="fa fa-check"></i><b>1.1</b> Objectives of the class</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#prerequisites"><i class="fa fa-check"></i><b>1.2</b> Prerequisites</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#teaser"><i class="fa fa-check"></i><b>1.3</b> Teaser</a></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#motivations"><i class="fa fa-check"></i><b>1.4</b> Motivations</a>
<ul>
<li class="chapter" data-level="1.4.1" data-path="index.html"><a href="index.html#reproducible-data-treatment-why-it-matters"><i class="fa fa-check"></i><b>1.4.1</b> Reproducible data treatment: why it matters</a></li>
<li class="chapter" data-level="1.4.2" data-path="index.html"><a href="index.html#why-with-r-and-not-python"><i class="fa fa-check"></i><b>1.4.2</b> Why with R and not python?</a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="index.html"><a href="index.html#further-reading"><i class="fa fa-check"></i><b>1.5</b> Further reading</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="getting-ready.html"><a href="getting-ready.html"><i class="fa fa-check"></i><b>2</b> Getting ready</a>
<ul>
<li class="chapter" data-level="2.1" data-path="getting-ready.html"><a href="getting-ready.html#the-easy-way"><i class="fa fa-check"></i><b>2.1</b> The easy way</a></li>
<li class="chapter" data-level="2.2" data-path="getting-ready.html"><a href="getting-ready.html#the-more-advanced-way"><i class="fa fa-check"></i><b>2.2</b> The more advanced way</a></li>
<li class="chapter" data-level="2.3" data-path="getting-ready.html"><a href="getting-ready.html#in-any-case-install-latex"><i class="fa fa-check"></i><b>2.3</b> In any case: install LaTeX</a></li>
<li class="chapter" data-level="2.4" data-path="getting-ready.html"><a href="getting-ready.html#setting-up-the-environment"><i class="fa fa-check"></i><b>2.4</b> Setting up the environment</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="teaser-practical-case.html"><a href="teaser-practical-case.html"><i class="fa fa-check"></i><b>3</b> Teaser: practical case</a>
<ul>
<li class="chapter" data-level="3.1" data-path="teaser-practical-case.html"><a href="teaser-practical-case.html#reading-and-fitting-all-your-experimental-files-in-one-go"><i class="fa fa-check"></i><b>3.1</b> Reading and fitting all your experimental files in one go</a></li>
<li class="chapter" data-level="3.2" data-path="teaser-practical-case.html"><a href="teaser-practical-case.html#various-ways-of-plotting-it"><i class="fa fa-check"></i><b>3.2</b> Various ways of plotting it</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="simple-variables.html"><a href="simple-variables.html"><i class="fa fa-check"></i><b>4</b> Simple variables</a>
<ul>
<li class="chapter" data-level="4.1" data-path="simple-variables.html"><a href="simple-variables.html#scalars-and-booleans"><i class="fa fa-check"></i><b>4.1</b> Scalars and booleans</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="simple-variables.html"><a href="simple-variables.html#booleans"><i class="fa fa-check"></i><b>4.1.1</b> Booleans</a></li>
<li class="chapter" data-level="4.1.2" data-path="simple-variables.html"><a href="simple-variables.html#special-values"><i class="fa fa-check"></i><b>4.1.2</b> Special values</a></li>
<li class="chapter" data-level="4.1.3" data-path="simple-variables.html"><a href="simple-variables.html#complex-values"><i class="fa fa-check"></i><b>4.1.3</b> Complex values</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="simple-variables.html"><a href="simple-variables.html#strings"><i class="fa fa-check"></i><b>4.2</b> Strings</a></li>
<li class="chapter" data-level="4.3" data-path="simple-variables.html"><a href="simple-variables.html#exo-variables"><i class="fa fa-check"></i><b>4.3</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="vectors.html"><a href="vectors.html"><i class="fa fa-check"></i><b>5</b> Vectors</a>
<ul>
<li class="chapter" data-level="5.1" data-path="vectors.html"><a href="vectors.html#different-ways-of-defining-a-vector"><i class="fa fa-check"></i><b>5.1</b> Different ways of defining a vector</a></li>
<li class="chapter" data-level="5.2" data-path="vectors.html"><a href="vectors.html#principal-operations-on-vectors"><i class="fa fa-check"></i><b>5.2</b> Principal operations on vectors</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="vectors.html"><a href="vectors.html#accessing-values"><i class="fa fa-check"></i><b>5.2.1</b> Accessing values</a></li>
<li class="chapter" data-level="5.2.2" data-path="vectors.html"><a href="vectors.html#sorting"><i class="fa fa-check"></i><b>5.2.2</b> Sorting</a></li>
<li class="chapter" data-level="5.2.3" data-path="vectors.html"><a href="vectors.html#maximum-and-minimum"><i class="fa fa-check"></i><b>5.2.3</b> Maximum and minimum</a></li>
<li class="chapter" data-level="5.2.4" data-path="vectors.html"><a href="vectors.html#mathematical-operations"><i class="fa fa-check"></i><b>5.2.4</b> Mathematical operations</a></li>
<li class="chapter" data-level="5.2.5" data-path="vectors.html"><a href="vectors.html#statistics-on-vectors"><i class="fa fa-check"></i><b>5.2.5</b> Statistics on vectors</a></li>
<li class="chapter" data-level="5.2.6" data-path="vectors.html"><a href="vectors.html#more-stuff"><i class="fa fa-check"></i><b>5.2.6</b> More stuff</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="vectors.html"><a href="vectors.html#exo-vactors"><i class="fa fa-check"></i><b>5.3</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="data-frames.html"><a href="data-frames.html"><i class="fa fa-check"></i><b>6</b> Data frames</a>
<ul>
<li class="chapter" data-level="6.1" data-path="data-frames.html"><a href="data-frames.html#defining-a-data.frame"><i class="fa fa-check"></i><b>6.1</b> Defining a data.frame</a></li>
<li class="chapter" data-level="6.2" data-path="data-frames.html"><a href="data-frames.html#accessing-values-1"><i class="fa fa-check"></i><b>6.2</b> Accessing values</a></li>
<li class="chapter" data-level="6.3" data-path="data-frames.html"><a href="data-frames.html#adding-columns-or-rows"><i class="fa fa-check"></i><b>6.3</b> Adding columns or rows</a></li>
<li class="chapter" data-level="6.4" data-path="data-frames.html"><a href="data-frames.html#tidy-up"><i class="fa fa-check"></i><b>6.4</b> Tidy up!</a>
<ul>
<li class="chapter" data-level="6.4.1" data-path="data-frames.html"><a href="data-frames.html#what-is-tidy-data"><i class="fa fa-check"></i><b>6.4.1</b> What is tidy data?</a></li>
<li class="chapter" data-level="6.4.2" data-path="data-frames.html"><a href="data-frames.html#tibbles"><i class="fa fa-check"></i><b>6.4.2</b> Tibbles</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="data-frames.html"><a href="data-frames.html#operations-in-the-tidyverse"><i class="fa fa-check"></i><b>6.5</b> Operations in the tidyverse</a></li>
<li class="chapter" data-level="6.6" data-path="data-frames.html"><a href="data-frames.html#exo-df"><i class="fa fa-check"></i><b>6.6</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="lists.html"><a href="lists.html"><i class="fa fa-check"></i><b>7</b> Lists</a>
<ul>
<li class="chapter" data-level="7.1" data-path="lists.html"><a href="lists.html#definition"><i class="fa fa-check"></i><b>7.1</b> Definition</a></li>
<li class="chapter" data-level="7.2" data-path="lists.html"><a href="lists.html#accessing-values-and-other-operations"><i class="fa fa-check"></i><b>7.2</b> Accessing values and other operations</a></li>
<li class="chapter" data-level="7.3" data-path="lists.html"><a href="lists.html#exo-lists"><i class="fa fa-check"></i><b>7.3</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="functions.html"><a href="functions.html"><i class="fa fa-check"></i><b>8</b> Functions</a>
<ul>
<li class="chapter" data-level="8.1" data-path="functions.html"><a href="functions.html#definition-1"><i class="fa fa-check"></i><b>8.1</b> Definition</a></li>
<li class="chapter" data-level="8.2" data-path="functions.html"><a href="functions.html#interpolation-of-data"><i class="fa fa-check"></i><b>8.2</b> Interpolation of data</a></li>
<li class="chapter" data-level="8.3" data-path="functions.html"><a href="functions.html#exo-functions"><i class="fa fa-check"></i><b>8.3</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="conditional-actions-and-loops.html"><a href="conditional-actions-and-loops.html"><i class="fa fa-check"></i><b>9</b> Conditional actions and loops</a>
<ul>
<li class="chapter" data-level="9.1" data-path="conditional-actions-and-loops.html"><a href="conditional-actions-and-loops.html#conditional-actions"><i class="fa fa-check"></i><b>9.1</b> Conditional actions</a></li>
<li class="chapter" data-level="9.2" data-path="conditional-actions-and-loops.html"><a href="conditional-actions-and-loops.html#loops"><i class="fa fa-check"></i><b>9.2</b> Loops…</a></li>
<li class="chapter" data-level="9.3" data-path="conditional-actions-and-loops.html"><a href="conditional-actions-and-loops.html#and-how-to-avoid-them"><i class="fa fa-check"></i><b>9.3</b> … and how to avoid them</a></li>
<li class="chapter" data-level="9.4" data-path="conditional-actions-and-loops.html"><a href="conditional-actions-and-loops.html#exo-loops"><i class="fa fa-check"></i><b>9.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="plotting.html"><a href="plotting.html"><i class="fa fa-check"></i><b>10</b> Plotting</a>
<ul>
<li class="chapter" data-level="10.1" data-path="plotting.html"><a href="plotting.html#base-graphics"><i class="fa fa-check"></i><b>10.1</b> Base graphics</a>
<ul>
<li class="chapter" data-level="10.1.1" data-path="plotting.html"><a href="plotting.html#basic-plotting"><i class="fa fa-check"></i><b>10.1.1</b> Basic plotting</a></li>
<li class="chapter" data-level="10.1.2" data-path="plotting.html"><a href="plotting.html#adding-some-style"><i class="fa fa-check"></i><b>10.1.2</b> Adding some style</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="plotting.html"><a href="plotting.html#advanced-plotting-using-ggplot2"><i class="fa fa-check"></i><b>10.2</b> Advanced plotting using ggplot2</a>
<ul>
<li class="chapter" data-level="10.2.1" data-path="plotting.html"><a href="plotting.html#the-grammar-of-graphics"><i class="fa fa-check"></i><b>10.2.1</b> The grammar of graphics</a></li>
<li class="chapter" data-level="10.2.2" data-path="plotting.html"><a href="plotting.html#theming"><i class="fa fa-check"></i><b>10.2.2</b> Theming</a></li>
<li class="chapter" data-level="10.2.3" data-path="plotting.html"><a href="plotting.html#making-interactive-plots-with-ggplot2-and-plotly"><i class="fa fa-check"></i><b>10.2.3</b> Making interactive plots with ggplot2 and plotly</a></li>
<li class="chapter" data-level="10.2.4" data-path="plotting.html"><a href="plotting.html#gathering-plots-on-a-grid"><i class="fa fa-check"></i><b>10.2.4</b> Gathering plots on a grid</a></li>
<li class="chapter" data-level="10.2.5" data-path="plotting.html"><a href="plotting.html#plots-with-insets"><i class="fa fa-check"></i><b>10.2.5</b> Plots with insets</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="plotting.html"><a href="plotting.html#exo-plots"><i class="fa fa-check"></i><b>10.3</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="colorplots.html"><a href="colorplots.html"><i class="fa fa-check"></i><b>11</b> 3D color plots</a>
<ul>
<li class="chapter" data-level="11.1" data-path="colorplots.html"><a href="colorplots.html#the-ggplot2-solution"><i class="fa fa-check"></i><b>11.1</b> The ggplot2 solution</a></li>
<li class="chapter" data-level="11.2" data-path="colorplots.html"><a href="colorplots.html#the-base-graphics-solution"><i class="fa fa-check"></i><b>11.2</b> The base graphics solution</a></li>
<li class="chapter" data-level="11.3" data-path="colorplots.html"><a href="colorplots.html#the-plotly-solution"><i class="fa fa-check"></i><b>11.3</b> The plotly solution</a></li>
<li class="chapter" data-level="11.4" data-path="colorplots.html"><a href="colorplots.html#the-case-of-non-regular-data"><i class="fa fa-check"></i><b>11.4</b> The case of non-regular data</a></li>
<li class="chapter" data-level="11.5" data-path="colorplots.html"><a href="colorplots.html#d-density-of-points"><i class="fa fa-check"></i><b>11.5</b> 2D density of points</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="fitting.html"><a href="fitting.html"><i class="fa fa-check"></i><b>12</b> Fitting</a>
<ul>
<li class="chapter" data-level="12.1" data-path="fitting.html"><a href="fitting.html#linear-fitting-with-lm"><i class="fa fa-check"></i><b>12.1</b> Linear fitting with <code>lm()</code></a></li>
<li class="chapter" data-level="12.2" data-path="fitting.html"><a href="fitting.html#nonlinear-least-squares-fitting"><i class="fa fa-check"></i><b>12.2</b> Nonlinear Least Squares fitting</a>
<ul>
<li class="chapter" data-level="12.2.1" data-path="fitting.html"><a href="fitting.html#the-nls-workhorse"><i class="fa fa-check"></i><b>12.2.1</b> The <code>nls()</code> workhorse</a></li>
<li class="chapter" data-level="12.2.2" data-path="fitting.html"><a href="fitting.html#using-constraints"><i class="fa fa-check"></i><b>12.2.2</b> Using constraints</a></li>
<li class="chapter" data-level="12.2.3" data-path="fitting.html"><a href="fitting.html#a-more-robust-version-of-nls"><i class="fa fa-check"></i><b>12.2.3</b> A more robust version of <code>nls</code></a></li>
</ul></li>
<li class="chapter" data-level="12.3" data-path="fitting.html"><a href="fitting.html#the-broom-library"><i class="fa fa-check"></i><b>12.3</b> The broom library</a></li>
<li class="chapter" data-level="12.4" data-path="fitting.html"><a href="fitting.html#exo-fits"><i class="fa fa-check"></i><b>12.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="practical-case-recursive-data-treatment.html"><a href="practical-case-recursive-data-treatment.html"><i class="fa fa-check"></i><b>13</b> Practical case: recursive data treatment</a>
<ul>
<li class="chapter" data-level="13.1" data-path="practical-case-recursive-data-treatment.html"><a href="practical-case-recursive-data-treatment.html#example-practical"><i class="fa fa-check"></i><b>13.1</b> Example</a></li>
<li class="chapter" data-level="13.2" data-path="practical-case-recursive-data-treatment.html"><a href="practical-case-recursive-data-treatment.html#exercise"><i class="fa fa-check"></i><b>13.2</b> Exercise</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="writing-documents-with-rmarkdown.html"><a href="writing-documents-with-rmarkdown.html"><i class="fa fa-check"></i><b>14</b> Writing documents with Rmarkdown</a>
<ul>
<li class="chapter" data-level="14.1" data-path="writing-documents-with-rmarkdown.html"><a href="writing-documents-with-rmarkdown.html#what-is-markdown"><i class="fa fa-check"></i><b>14.1</b> What is markdown?</a></li>
<li class="chapter" data-level="14.2" data-path="writing-documents-with-rmarkdown.html"><a href="writing-documents-with-rmarkdown.html#and-rmarkdown"><i class="fa fa-check"></i><b>14.2</b> … and Rmarkdown?</a></li>
<li class="chapter" data-level="14.3" data-path="writing-documents-with-rmarkdown.html"><a href="writing-documents-with-rmarkdown.html#further-reading-1"><i class="fa fa-check"></i><b>14.3</b> Further reading</a></li>
<li class="chapter" data-level="14.4" data-path="writing-documents-with-rmarkdown.html"><a href="writing-documents-with-rmarkdown.html#example-Rmd"><i class="fa fa-check"></i><b>14.4</b> Example</a></li>
<li class="chapter" data-level="14.5" data-path="writing-documents-with-rmarkdown.html"><a href="writing-documents-with-rmarkdown.html#code-chunks-options"><i class="fa fa-check"></i><b>14.5</b> Code chunks options</a></li>
<li class="chapter" data-level="14.6" data-path="writing-documents-with-rmarkdown.html"><a href="writing-documents-with-rmarkdown.html#compilation"><i class="fa fa-check"></i><b>14.6</b> Compilation</a></li>
<li class="chapter" data-level="14.7" data-path="writing-documents-with-rmarkdown.html"><a href="writing-documents-with-rmarkdown.html#going-further-parameters"><i class="fa fa-check"></i><b>14.7</b> Going further: parameters</a></li>
<li class="chapter" data-level="14.8" data-path="writing-documents-with-rmarkdown.html"><a href="writing-documents-with-rmarkdown.html#and-what-about-jupyter-notebooks"><i class="fa fa-check"></i><b>14.8</b> And what about JuPyteR notebooks?</a></li>
<li class="chapter" data-level="14.9" data-path="writing-documents-with-rmarkdown.html"><a href="writing-documents-with-rmarkdown.html#exo-rmd"><i class="fa fa-check"></i><b>14.9</b> Exercise</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="graphical-interfaces-with-shiny.html"><a href="graphical-interfaces-with-shiny.html"><i class="fa fa-check"></i><b>15</b> Graphical interfaces with Shiny</a>
<ul>
<li class="chapter" data-level="15.1" data-path="graphical-interfaces-with-shiny.html"><a href="graphical-interfaces-with-shiny.html#stand-alone-shiny-application"><i class="fa fa-check"></i><b>15.1</b> Stand-alone shiny application</a>
<ul>
<li class="chapter" data-level="15.1.1" data-path="graphical-interfaces-with-shiny.html"><a href="graphical-interfaces-with-shiny.html#the-layout"><i class="fa fa-check"></i><b>15.1.1</b> The layout</a></li>
<li class="chapter" data-level="15.1.2" data-path="graphical-interfaces-with-shiny.html"><a href="graphical-interfaces-with-shiny.html#the-server"><i class="fa fa-check"></i><b>15.1.2</b> The server</a></li>
<li class="chapter" data-level="15.1.3" data-path="graphical-interfaces-with-shiny.html"><a href="graphical-interfaces-with-shiny.html#various-useful-functions"><i class="fa fa-check"></i><b>15.1.3</b> Various useful functions</a></li>
<li class="chapter" data-level="15.1.4" data-path="graphical-interfaces-with-shiny.html"><a href="graphical-interfaces-with-shiny.html#example-shiny"><i class="fa fa-check"></i><b>15.1.4</b> Example</a></li>
</ul></li>
<li class="chapter" data-level="15.2" data-path="graphical-interfaces-with-shiny.html"><a href="graphical-interfaces-with-shiny.html#rmarkdown-embedded-shiny-application"><i class="fa fa-check"></i><b>15.2</b> Rmarkdown-embedded shiny application</a></li>
<li class="chapter" data-level="15.3" data-path="graphical-interfaces-with-shiny.html"><a href="graphical-interfaces-with-shiny.html#deploying-your-shiny-app"><i class="fa fa-check"></i><b>15.3</b> Deploying your shiny app</a>
<ul>
<li class="chapter" data-level="15.3.1" data-path="graphical-interfaces-with-shiny.html"><a href="graphical-interfaces-with-shiny.html#passing-the-app.r-file-to-your-users"><i class="fa fa-check"></i><b>15.3.1</b> Passing the app.R file to your users</a></li>
<li class="chapter" data-level="15.3.2" data-path="graphical-interfaces-with-shiny.html"><a href="graphical-interfaces-with-shiny.html#deploying-to-shinyapps.io"><i class="fa fa-check"></i><b>15.3.2</b> Deploying to shinyapps.io</a></li>
<li class="chapter" data-level="15.3.3" data-path="graphical-interfaces-with-shiny.html"><a href="graphical-interfaces-with-shiny.html#deploying-on-your-own-linux-server"><i class="fa fa-check"></i><b>15.3.3</b> Deploying on your own Linux server</a></li>
<li class="chapter" data-level="15.3.4" data-path="graphical-interfaces-with-shiny.html"><a href="graphical-interfaces-with-shiny.html#building-an-executable"><i class="fa fa-check"></i><b>15.3.4</b> Building an executable</a></li>
</ul></li>
<li class="chapter" data-level="15.4" data-path="graphical-interfaces-with-shiny.html"><a href="graphical-interfaces-with-shiny.html#further-reading-2"><i class="fa fa-check"></i><b>15.4</b> Further reading</a></li>
<li class="chapter" data-level="15.5" data-path="graphical-interfaces-with-shiny.html"><a href="graphical-interfaces-with-shiny.html#exo-shiny"><i class="fa fa-check"></i><b>15.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="working-with-units-and-experimental-errors.html"><a href="working-with-units-and-experimental-errors.html"><i class="fa fa-check"></i><b>16</b> Working with units and experimental errors</a>
<ul>
<li class="chapter" data-level="16.1" data-path="working-with-units-and-experimental-errors.html"><a href="working-with-units-and-experimental-errors.html#working-with-units"><i class="fa fa-check"></i><b>16.1</b> Working with units</a></li>
<li class="chapter" data-level="16.2" data-path="working-with-units-and-experimental-errors.html"><a href="working-with-units-and-experimental-errors.html#working-with-experimental-errors"><i class="fa fa-check"></i><b>16.2</b> Working with experimental errors</a></li>
</ul></li>
<li class="chapter" data-level="17" data-path="reading-all-kinds-of-files.html"><a href="reading-all-kinds-of-files.html"><i class="fa fa-check"></i><b>17</b> Reading all kinds of files</a>
<ul>
<li class="chapter" data-level="17.1" data-path="reading-all-kinds-of-files.html"><a href="reading-all-kinds-of-files.html#column-text-files"><i class="fa fa-check"></i><b>17.1</b> Column text files</a></li>
<li class="chapter" data-level="17.2" data-path="reading-all-kinds-of-files.html"><a href="reading-all-kinds-of-files.html#excel-files"><i class="fa fa-check"></i><b>17.2</b> Excel files</a></li>
<li class="chapter" data-level="17.3" data-path="reading-all-kinds-of-files.html"><a href="reading-all-kinds-of-files.html#origin-files"><i class="fa fa-check"></i><b>17.3</b> Origin files</a></li>
<li class="chapter" data-level="17.4" data-path="reading-all-kinds-of-files.html"><a href="reading-all-kinds-of-files.html#images"><i class="fa fa-check"></i><b>17.4</b> Images</a></li>
<li class="chapter" data-level="17.5" data-path="reading-all-kinds-of-files.html"><a href="reading-all-kinds-of-files.html#spectroscopic-files"><i class="fa fa-check"></i><b>17.5</b> Spectroscopic files</a></li>
<li class="chapter" data-level="17.6" data-path="reading-all-kinds-of-files.html"><a href="reading-all-kinds-of-files.html#compressed-binary-data-files-hdf-netcdf"><i class="fa fa-check"></i><b>17.6</b> Compressed binary data files: HDF, netCDF</a></li>
</ul></li>
<li class="chapter" data-level="18" data-path="list-of-exercises.html"><a href="list-of-exercises.html"><i class="fa fa-check"></i><b>18</b> List of exercises</a></li>
<li class="divider"></li>
<br><br><br><br>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Reproducible data treatment with R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data-frames" class="section level1" number="6">
<h1><span class="header-section-number">6</span> Data frames</h1>
<div id="defining-a-data.frame" class="section level2" number="6.1">
<h2><span class="header-section-number">6.1</span> Defining a data.frame</h2>
<p>In R, the principal object is <em>the data</em>. Hence the <code class="sourceCode r">data.frame</code> object, which is basically a table of vectors. A <code class="sourceCode r">data.frame</code> is a list presented under the form of a table – <em>i.e.</em> a spreadsheet. On a day-to-day basis, you will either define <code class="sourceCode r">data.frame</code> from existing vectors or other <code class="sourceCode r">data.frame</code>, or define a <code class="sourceCode r">data.frame</code> from a file (text, Excel…). In this example, we use <a href="Data/test.dat" download target="_blank">test.dat</a> and <a href="Data/test.xlsx" download target="_blank">test.xlsx</a>.</p>
<div class="sourceCode" id="cb251"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb251-1"><a href="data-frames.html#cb251-1" aria-hidden="true" tabindex="-1"></a><span class="co"># x = 10 random numbers between -10 and 10</span></span>
<span id="cb251-2"><a href="data-frames.html#cb251-2" aria-hidden="true" tabindex="-1"></a>x  <span class="ot">&lt;-</span> <span class="fu">runif</span>(<span class="dv">10</span>, <span class="at">min=</span><span class="sc">-</span><span class="dv">10</span>, <span class="at">max=</span><span class="dv">10</span>) </span>
<span id="cb251-3"><a href="data-frames.html#cb251-3" aria-hidden="true" tabindex="-1"></a>y  <span class="ot">&lt;-</span> <span class="fu">sin</span>(x)</span>
<span id="cb251-4"><a href="data-frames.html#cb251-4" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(x,y) <span class="co"># df is a data.frame (a table)</span></span>
<span id="cb251-5"><a href="data-frames.html#cb251-5" aria-hidden="true" tabindex="-1"></a>df</span></code></pre></div>
<pre><code>##              x           y
## 1  -0.38739348 -0.37777634
## 2  -9.39806126 -0.02671352
## 3   4.69043469 -0.99975901
## 4   9.15842710  0.26321273
## 5  -0.41772850 -0.40568532
## 6  -1.39347677 -0.98432004
## 7  -2.62683596 -0.49232308
## 8   5.99463363 -0.28456408
## 9  -3.01573392 -0.12552673
## 10  0.02539936  0.02539662</code></pre>
<div class="sourceCode" id="cb253"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb253-1"><a href="data-frames.html#cb253-1" aria-hidden="true" tabindex="-1"></a><span class="co"># dimension of df</span></span>
<span id="cb253-2"><a href="data-frames.html#cb253-2" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(df);<span class="fu">nrow</span>(df);<span class="fu">ncol</span>(df)</span></code></pre></div>
<pre><code>## [1] 10  2</code></pre>
<pre><code>## [1] 10</code></pre>
<pre><code>## [1] 2</code></pre>
<div class="sourceCode" id="cb257"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb257-1"><a href="data-frames.html#cb257-1" aria-hidden="true" tabindex="-1"></a><span class="co"># first and last 3 values</span></span>
<span id="cb257-2"><a href="data-frames.html#cb257-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(df, <span class="dv">3</span>); <span class="fu">tail</span>(df, <span class="dv">3</span>)</span></code></pre></div>
<pre><code>##            x           y
## 1 -0.3873935 -0.37777634
## 2 -9.3980613 -0.02671352
## 3  4.6904347 -0.99975901</code></pre>
<pre><code>##              x           y
## 8   5.99463363 -0.28456408
## 9  -3.01573392 -0.12552673
## 10  0.02539936  0.02539662</code></pre>
<div class="sourceCode" id="cb260"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb260-1"><a href="data-frames.html#cb260-1" aria-hidden="true" tabindex="-1"></a><span class="co"># information on df</span></span>
<span id="cb260-2"><a href="data-frames.html#cb260-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(df)</span></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    10 obs. of  2 variables:
##  $ x: num  -0.387 -9.398 4.69 9.158 -0.418 ...
##  $ y: num  -0.3778 -0.0267 -0.9998 0.2632 -0.4057 ...</code></pre>
<div class="sourceCode" id="cb262"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb262-1"><a href="data-frames.html#cb262-1" aria-hidden="true" tabindex="-1"></a><span class="co"># statistics on df</span></span>
<span id="cb262-2"><a href="data-frames.html#cb262-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(df)</span></code></pre></div>
<pre><code>##        x                 y           
##  Min.   :-9.3981   Min.   :-0.99976  
##  1st Qu.:-2.3185   1st Qu.:-0.47066  
##  Median :-0.4026   Median :-0.33117  
##  Mean   : 0.2630   Mean   :-0.34081  
##  3rd Qu.: 3.5242   3rd Qu.:-0.05142  
##  Max.   : 9.1584   Max.   : 0.26321</code></pre>
<div class="sourceCode" id="cb264"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb264-1"><a href="data-frames.html#cb264-1" aria-hidden="true" tabindex="-1"></a><span class="co"># changing column name</span></span>
<span id="cb264-2"><a href="data-frames.html#cb264-2" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">xxx=</span>x,<span class="at">yyy=</span>y)</span>
<span id="cb264-3"><a href="data-frames.html#cb264-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(df,<span class="dv">2</span>)</span></code></pre></div>
<pre><code>##          xxx         yyy
## 1 -0.3873935 -0.37777634
## 2 -9.3980613 -0.02671352</code></pre>
<div class="sourceCode" id="cb266"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb266-1"><a href="data-frames.html#cb266-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(df) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;thisISx&quot;</span>,<span class="st">&quot;THISisY&quot;</span>)</span>
<span id="cb266-2"><a href="data-frames.html#cb266-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(df,<span class="dv">2</span>)</span></code></pre></div>
<pre><code>##      thisISx     THISisY
## 1 -0.3873935 -0.37777634
## 2 -9.3980613 -0.02671352</code></pre>
<div class="sourceCode" id="cb268"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb268-1"><a href="data-frames.html#cb268-1" aria-hidden="true" tabindex="-1"></a><span class="co"># from a matrix</span></span>
<span id="cb268-2"><a href="data-frames.html#cb268-2" aria-hidden="true" tabindex="-1"></a>A <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">9</span>,<span class="at">ncol=</span><span class="dv">3</span>)</span>
<span id="cb268-3"><a href="data-frames.html#cb268-3" aria-hidden="true" tabindex="-1"></a><span class="fu">as.data.frame</span>(A)</span></code></pre></div>
<pre><code>##   V1 V2 V3
## 1  1  4  7
## 2  2  5  8
## 3  3  6  9</code></pre>
<div class="sourceCode" id="cb270"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb270-1"><a href="data-frames.html#cb270-1" aria-hidden="true" tabindex="-1"></a><span class="co"># from a file</span></span>
<span id="cb270-2"><a href="data-frames.html#cb270-2" aria-hidden="true" tabindex="-1"></a><span class="fu">read.table</span>(<span class="st">&quot;Data/test.dat&quot;</span>)            <span class="co"># default column name is V1, V2, V3, etc</span></span></code></pre></div>
<pre><code>##   V1 V2
## 1  x  y
## 2  1  2
## 3  2  3</code></pre>
<div class="sourceCode" id="cb272"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb272-1"><a href="data-frames.html#cb272-1" aria-hidden="true" tabindex="-1"></a><span class="fu">read.table</span>(<span class="st">&quot;Data/test.dat&quot;</span>,<span class="at">header=</span><span class="cn">TRUE</span>)<span class="co"># use first line as column names</span></span></code></pre></div>
<pre><code>##   x y
## 1 1 2
## 2 2 3</code></pre>
<div class="sourceCode" id="cb274"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb274-1"><a href="data-frames.html#cb274-1" aria-hidden="true" tabindex="-1"></a><span class="fu">read.table</span>(<span class="st">&quot;Data/test.dat&quot;</span>,<span class="at">skip=</span><span class="dv">1</span>)     <span class="co"># skip first line. </span></span></code></pre></div>
<pre><code>##   V1 V2
## 1  1  2
## 2  2  3</code></pre>
<div class="sourceCode" id="cb276"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb276-1"><a href="data-frames.html#cb276-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ?read.table for more options</span></span>
<span id="cb276-2"><a href="data-frames.html#cb276-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl) <span class="co"># load readxl from tidyverse to read Excel files</span></span>
<span id="cb276-3"><a href="data-frames.html#cb276-3" aria-hidden="true" tabindex="-1"></a><span class="fu">read_excel</span>(<span class="st">&quot;Data/test.xlsx&quot;</span>, <span class="at">sheet=</span><span class="dv">1</span>)</span></code></pre></div>
<pre><code>## # A tibble: 10 x 2
##        x      y
##    &lt;dbl&gt;  &lt;dbl&gt;
##  1     1  5.21 
##  2     2  6.55 
##  3     3  3.71 
##  4     4  0.216
##  5     5  0.205
##  6     6  4.60 
##  7     7 10.3  
##  8     8 12.9  
##  9     9 11.1  
## 10    10  7.28</code></pre>
<div class="sourceCode" id="cb278"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb278-1"><a href="data-frames.html#cb278-1" aria-hidden="true" tabindex="-1"></a><span class="fu">read_excel</span>(<span class="st">&quot;Data/test.xlsx&quot;</span>, <span class="at">sheet=</span><span class="dv">2</span>)</span></code></pre></div>
<pre><code>## # A tibble: 4 x 2
##   hello  world   
##   &lt;chr&gt;  &lt;chr&gt;   
## 1 ac     th      
## 2 asc    thh     
## 3 ascsa  dthdh   
## 4 ascacs dthtdhdh</code></pre>
</div>
<div id="accessing-values-1" class="section level2" number="6.2">
<h2><span class="header-section-number">6.2</span> Accessing values</h2>
<div class="sourceCode" id="cb280"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb280-1"><a href="data-frames.html#cb280-1" aria-hidden="true" tabindex="-1"></a><span class="co"># column number</span></span>
<span id="cb280-2"><a href="data-frames.html#cb280-2" aria-hidden="true" tabindex="-1"></a>df[,<span class="dv">1</span>] <span class="co"># this is a vector</span></span></code></pre></div>
<pre><code>##  [1] -0.38739348 -9.39806126  4.69043469  9.15842710 -0.41772850 -1.39347677
##  [7] -2.62683596  5.99463363 -3.01573392  0.02539936</code></pre>
<div class="sourceCode" id="cb282"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb282-1"><a href="data-frames.html#cb282-1" aria-hidden="true" tabindex="-1"></a>df[[<span class="dv">1</span>]]<span class="co"># this is a vector too</span></span></code></pre></div>
<pre><code>##  [1] -0.38739348 -9.39806126  4.69043469  9.15842710 -0.41772850 -1.39347677
##  [7] -2.62683596  5.99463363 -3.01573392  0.02539936</code></pre>
<div class="sourceCode" id="cb284"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb284-1"><a href="data-frames.html#cb284-1" aria-hidden="true" tabindex="-1"></a><span class="co"># column name</span></span>
<span id="cb284-2"><a href="data-frames.html#cb284-2" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>thisISx; df[,<span class="st">&quot;THISisY&quot;</span>] <span class="co"># a vector too</span></span></code></pre></div>
<pre><code>##  [1] -0.38739348 -9.39806126  4.69043469  9.15842710 -0.41772850 -1.39347677
##  [7] -2.62683596  5.99463363 -3.01573392  0.02539936</code></pre>
<pre><code>##  [1] -0.37777634 -0.02671352 -0.99975901  0.26321273 -0.40568532 -0.98432004
##  [7] -0.49232308 -0.28456408 -0.12552673  0.02539662</code></pre>
<div class="sourceCode" id="cb287"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb287-1"><a href="data-frames.html#cb287-1" aria-hidden="true" tabindex="-1"></a><span class="co"># first row; row 1 to 3</span></span>
<span id="cb287-2"><a href="data-frames.html#cb287-2" aria-hidden="true" tabindex="-1"></a>df[<span class="dv">1</span>,]; df[<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>,]</span></code></pre></div>
<pre><code>##      thisISx    THISisY
## 1 -0.3873935 -0.3777763</code></pre>
<pre><code>##      thisISx     THISisY
## 1 -0.3873935 -0.37777634
## 2 -9.3980613 -0.02671352
## 3  4.6904347 -0.99975901</code></pre>
<div class="sourceCode" id="cb290"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb290-1"><a href="data-frames.html#cb290-1" aria-hidden="true" tabindex="-1"></a><span class="co"># through conditions</span></span>
<span id="cb290-2"><a href="data-frames.html#cb290-2" aria-hidden="true" tabindex="-1"></a>df[x<span class="sc">&lt;</span><span class="dv">0</span> <span class="sc">&amp;</span> y<span class="sc">&gt;</span><span class="dv">0</span>, ]  <span class="co"># Here x and y are vectors, not the column names</span></span></code></pre></div>
<pre><code>## [1] thisISx THISisY
## &lt;0 rows&gt; (or 0-length row.names)</code></pre>
<div class="sourceCode" id="cb292"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb292-1"><a href="data-frames.html#cb292-1" aria-hidden="true" tabindex="-1"></a>df[ df[,<span class="st">&quot;thisISx&quot;</span>]<span class="sc">&lt;</span><span class="dv">0</span> <span class="sc">&amp;</span> df[,<span class="dv">2</span>]<span class="sc">&gt;</span><span class="dv">0</span>, ]  <span class="co"># conditions on columns</span></span></code></pre></div>
<pre><code>## [1] thisISx THISisY
## &lt;0 rows&gt; (or 0-length row.names)</code></pre>
<div class="sourceCode" id="cb294"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb294-1"><a href="data-frames.html#cb294-1" aria-hidden="true" tabindex="-1"></a><span class="co"># subsetting using column names</span></span>
<span id="cb294-2"><a href="data-frames.html#cb294-2" aria-hidden="true" tabindex="-1"></a><span class="fu">subset</span>(df, thisISx<span class="sc">&gt;</span><span class="dv">2</span> <span class="sc">&amp;</span> THISisY<span class="sc">&gt;</span><span class="dv">0</span>)</span></code></pre></div>
<pre><code>##    thisISx   THISisY
## 4 9.158427 0.2632127</code></pre>
<div class="sourceCode" id="cb296"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb296-1"><a href="data-frames.html#cb296-1" aria-hidden="true" tabindex="-1"></a><span class="fu">subset</span>(df, thisISx<span class="sc">&gt;</span><span class="dv">2</span> <span class="sc">&amp;</span> THISisY<span class="sc">&gt;</span><span class="dv">0</span>, <span class="at">select =</span> <span class="fu">c</span>(thisISx))</span></code></pre></div>
<pre><code>##    thisISx
## 4 9.158427</code></pre>
</div>
<div id="adding-columns-or-rows" class="section level2" number="6.3">
<h2><span class="header-section-number">6.3</span> Adding columns or rows</h2>
<div class="sourceCode" id="cb298"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb298-1"><a href="data-frames.html#cb298-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Adding columns</span></span>
<span id="cb298-2"><a href="data-frames.html#cb298-2" aria-hidden="true" tabindex="-1"></a>df   <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(x,y)</span>
<span id="cb298-3"><a href="data-frames.html#cb298-3" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>z <span class="ot">&lt;-</span> (df<span class="sc">$</span>x)<span class="sc">^</span><span class="dv">2</span>; df</span></code></pre></div>
<pre><code>##              x           y            z
## 1  -0.38739348 -0.37777634 1.500737e-01
## 2  -9.39806126 -0.02671352 8.832356e+01
## 3   4.69043469 -0.99975901 2.200018e+01
## 4   9.15842710  0.26321273 8.387679e+01
## 5  -0.41772850 -0.40568532 1.744971e-01
## 6  -1.39347677 -0.98432004 1.941778e+00
## 7  -2.62683596 -0.49232308 6.900267e+00
## 8   5.99463363 -0.28456408 3.593563e+01
## 9  -3.01573392 -0.12552673 9.094651e+00
## 10  0.02539936  0.02539662 6.451272e-04</code></pre>
<div class="sourceCode" id="cb300"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb300-1"><a href="data-frames.html#cb300-1" aria-hidden="true" tabindex="-1"></a><span class="fu">data.frame</span>(df,<span class="at">w=</span><span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(x), <span class="at">xx=</span><span class="cn">NA</span>, <span class="at">yy=</span><span class="dv">1</span>, <span class="at">zz=</span><span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>)</span></code></pre></div>
<pre><code>##              x           y            z  w xx yy zz
## 1  -0.38739348 -0.37777634 1.500737e-01  1 NA  1  1
## 2  -9.39806126 -0.02671352 8.832356e+01  2 NA  1  2
## 3   4.69043469 -0.99975901 2.200018e+01  3 NA  1  1
## 4   9.15842710  0.26321273 8.387679e+01  4 NA  1  2
## 5  -0.41772850 -0.40568532 1.744971e-01  5 NA  1  1
## 6  -1.39347677 -0.98432004 1.941778e+00  6 NA  1  2
## 7  -2.62683596 -0.49232308 6.900267e+00  7 NA  1  1
## 8   5.99463363 -0.28456408 3.593563e+01  8 NA  1  2
## 9  -3.01573392 -0.12552673 9.094651e+00  9 NA  1  1
## 10  0.02539936  0.02539662 6.451272e-04 10 NA  1  2</code></pre>
<div class="sourceCode" id="cb302"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb302-1"><a href="data-frames.html#cb302-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cbind</span>(df, <span class="fu">data.frame</span>(<span class="at">a=</span><span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(x), <span class="at">b=</span><span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(x)) )</span></code></pre></div>
<pre><code>##              x           y            z  a  b
## 1  -0.38739348 -0.37777634 1.500737e-01  1  1
## 2  -9.39806126 -0.02671352 8.832356e+01  2  2
## 3   4.69043469 -0.99975901 2.200018e+01  3  3
## 4   9.15842710  0.26321273 8.387679e+01  4  4
## 5  -0.41772850 -0.40568532 1.744971e-01  5  5
## 6  -1.39347677 -0.98432004 1.941778e+00  6  6
## 7  -2.62683596 -0.49232308 6.900267e+00  7  7
## 8   5.99463363 -0.28456408 3.593563e+01  8  8
## 9  -3.01573392 -0.12552673 9.094651e+00  9  9
## 10  0.02539936  0.02539662 6.451272e-04 10 10</code></pre>
<div class="sourceCode" id="cb304"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb304-1"><a href="data-frames.html#cb304-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Adding rows</span></span>
<span id="cb304-2"><a href="data-frames.html#cb304-2" aria-hidden="true" tabindex="-1"></a><span class="fu">rbind</span>(df, df)     <span class="co"># with a data.frame</span></span></code></pre></div>
<pre><code>##              x           y            z
## 1  -0.38739348 -0.37777634 1.500737e-01
## 2  -9.39806126 -0.02671352 8.832356e+01
## 3   4.69043469 -0.99975901 2.200018e+01
## 4   9.15842710  0.26321273 8.387679e+01
## 5  -0.41772850 -0.40568532 1.744971e-01
## 6  -1.39347677 -0.98432004 1.941778e+00
## 7  -2.62683596 -0.49232308 6.900267e+00
## 8   5.99463363 -0.28456408 3.593563e+01
## 9  -3.01573392 -0.12552673 9.094651e+00
## 10  0.02539936  0.02539662 6.451272e-04
## 11 -0.38739348 -0.37777634 1.500737e-01
## 12 -9.39806126 -0.02671352 8.832356e+01
## 13  4.69043469 -0.99975901 2.200018e+01
## 14  9.15842710  0.26321273 8.387679e+01
## 15 -0.41772850 -0.40568532 1.744971e-01
## 16 -1.39347677 -0.98432004 1.941778e+00
## 17 -2.62683596 -0.49232308 6.900267e+00
## 18  5.99463363 -0.28456408 3.593563e+01
## 19 -3.01573392 -0.12552673 9.094651e+00
## 20  0.02539936  0.02539662 6.451272e-04</code></pre>
<div class="sourceCode" id="cb306"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb306-1"><a href="data-frames.html#cb306-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rbind</span>(df, <span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>)    <span class="co"># with a vector</span></span></code></pre></div>
<pre><code>##              x           y            z
## 1  -0.38739348 -0.37777634 1.500737e-01
## 2  -9.39806126 -0.02671352 8.832356e+01
## 3   4.69043469 -0.99975901 2.200018e+01
## 4   9.15842710  0.26321273 8.387679e+01
## 5  -0.41772850 -0.40568532 1.744971e-01
## 6  -1.39347677 -0.98432004 1.941778e+00
## 7  -2.62683596 -0.49232308 6.900267e+00
## 8   5.99463363 -0.28456408 3.593563e+01
## 9  -3.01573392 -0.12552673 9.094651e+00
## 10  0.02539936  0.02539662 6.451272e-04
## 11  1.00000000  2.00000000 1.000000e+00</code></pre>
<div class="sourceCode" id="cb308"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb308-1"><a href="data-frames.html#cb308-1" aria-hidden="true" tabindex="-1"></a><span class="co"># deleting rows/columns</span></span>
<span id="cb308-2"><a href="data-frames.html#cb308-2" aria-hidden="true" tabindex="-1"></a>df[<span class="sc">-</span><span class="dv">1</span>,]</span></code></pre></div>
<pre><code>##              x           y            z
## 2  -9.39806126 -0.02671352 8.832356e+01
## 3   4.69043469 -0.99975901 2.200018e+01
## 4   9.15842710  0.26321273 8.387679e+01
## 5  -0.41772850 -0.40568532 1.744971e-01
## 6  -1.39347677 -0.98432004 1.941778e+00
## 7  -2.62683596 -0.49232308 6.900267e+00
## 8   5.99463363 -0.28456408 3.593563e+01
## 9  -3.01573392 -0.12552673 9.094651e+00
## 10  0.02539936  0.02539662 6.451272e-04</code></pre>
<div class="sourceCode" id="cb310"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb310-1"><a href="data-frames.html#cb310-1" aria-hidden="true" tabindex="-1"></a>df[,<span class="sc">-</span><span class="dv">1</span>]</span></code></pre></div>
<pre><code>##              y            z
## 1  -0.37777634 1.500737e-01
## 2  -0.02671352 8.832356e+01
## 3  -0.99975901 2.200018e+01
## 4   0.26321273 8.387679e+01
## 5  -0.40568532 1.744971e-01
## 6  -0.98432004 1.941778e+00
## 7  -0.49232308 6.900267e+00
## 8  -0.28456408 3.593563e+01
## 9  -0.12552673 9.094651e+00
## 10  0.02539662 6.451272e-04</code></pre>
</div>
<div id="tidy-up" class="section level2" number="6.4">
<h2><span class="header-section-number">6.4</span> Tidy up!</h2>
<div id="what-is-tidy-data" class="section level3" number="6.4.1">
<h3><span class="header-section-number">6.4.1</span> What is tidy data?</h3>
<p><strong>A good practice in R is to <em>tidy</em> your data.</strong> R follows a set of conventions that makes one layout of tabular data much easier to work with than others. Your data will be easier to work with in R if it follows three rules:</p>
<ul>
<li>Each variable in the data set is placed in its own column</li>
<li>Each observation is placed in its own row</li>
<li>Each value is placed in its own cell</li>
</ul>
<p>Data that satisfies these rules is known as tidy data. Example:</p>
<div class="sourceCode" id="cb312"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb312-1"><a href="data-frames.html#cb312-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;Data/population.csv&quot;</span>)</span>
<span id="cb312-2"><a href="data-frames.html#cb312-2" aria-hidden="true" tabindex="-1"></a>df <span class="co"># is not tidy</span></span></code></pre></div>
<details>
<summary>
Show output
</summary>
<pre><code>##   year Angers Bordeaux  Brest  Dijon Grenoble Le.Havre Le.Mans  Lille   Lyon
## 1 1962 115273   278403 136104 135694   156707   187845  132181 239955 535746
## 2 1968 128557   266662 154023 145357   161616   207150  143246 238554 527800
## 3 1975 137591   223131 166826 151705   166037   217882  152285 219204 456716
## 4 1982 136038   208159 156060 140942   156637   199388  147697 196705 413095
## 5 1990 141404   210336 147956 146703   150758   195854  145502 198691 415487
## 6 1999 151279   215363 149634 149867   153317   190905  146105 212597 445452
## 7 2007 151108   235178 142722 151543   156793   179751  144164 225789 472330
## 8 2012 149017   241287 139676 152071   158346   173142  143599 228652 496343
##   Marseille Montpellier Nantes   Nice   Paris  Reims Rennes Saint.Étienne
## 1    778071      118864 240048 292958 2790091 134856 151948        210311
## 2    889029      161910 260244 322442 2590771 154534 180943        223223
## 3    908600      191354 256693 344481 2299830 178381 198305        220181
## 4    874436      197231 240539 337085 2176243 177234 194656        204955
## 5    800550      207996 244995 342439 2152423 180620 197536        199396
## 6    798430      225392 270251 342738 2125246 187206 206229        180210
## 7    852395      253712 283025 348721 2193030 183500 207922        175318
## 8    852516      268456 291604 343629 2240621 181893 209860        171483
##   Strasbourg Toulon Toulouse
## 1     228971 161797   323724
## 2     249396 174746   370796
## 3     253384 181801   373796
## 4     248712 179423   347995
## 5     252338 167619   358688
## 6     264115 160639   390350
## 7     272123 166537   439453
## 8     274394 164899   453317</code></pre>
</details>
<div class="sourceCode" id="cb314"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb314-1"><a href="data-frames.html#cb314-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyr)</span>
<span id="cb314-2"><a href="data-frames.html#cb314-2" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">pivot_longer</span>(df, <span class="at">cols=</span><span class="sc">-</span>year, <span class="at">names_to=</span><span class="st">&quot;city&quot;</span>, <span class="at">values_to=</span><span class="st">&quot;pop&quot;</span>)</span>
<span id="cb314-3"><a href="data-frames.html#cb314-3" aria-hidden="true" tabindex="-1"></a>df <span class="co">#is tidy</span></span></code></pre></div>
<details>
<summary>
Show output
</summary>
<pre><code>## # A tibble: 160 x 3
##     year city         pop
##    &lt;int&gt; &lt;chr&gt;      &lt;int&gt;
##  1  1962 Angers    115273
##  2  1962 Bordeaux  278403
##  3  1962 Brest     136104
##  4  1962 Dijon     135694
##  5  1962 Grenoble  156707
##  6  1962 Le.Havre  187845
##  7  1962 Le.Mans   132181
##  8  1962 Lille     239955
##  9  1962 Lyon      535746
## 10  1962 Marseille 778071
## # … with 150 more rows</code></pre>
</details>
<div class="sourceCode" id="cb316"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb316-1"><a href="data-frames.html#cb316-1" aria-hidden="true" tabindex="-1"></a><span class="co"># is not tidy</span></span>
<span id="cb316-2"><a href="data-frames.html#cb316-2" aria-hidden="true" tabindex="-1"></a><span class="fu">pivot_wider</span>(df, <span class="at">names_from=</span><span class="st">&quot;city&quot;</span>, <span class="at">values_from=</span><span class="st">&quot;pop&quot;</span>)</span></code></pre></div>
<details>
<summary>
Show output
</summary>
<pre><code>## # A tibble: 8 x 21
##    year Angers Bordeaux  Brest  Dijon Grenoble Le.Havre Le.Mans  Lille   Lyon
##   &lt;int&gt;  &lt;int&gt;    &lt;int&gt;  &lt;int&gt;  &lt;int&gt;    &lt;int&gt;    &lt;int&gt;   &lt;int&gt;  &lt;int&gt;  &lt;int&gt;
## 1  1962 115273   278403 136104 135694   156707   187845  132181 239955 535746
## 2  1968 128557   266662 154023 145357   161616   207150  143246 238554 527800
## 3  1975 137591   223131 166826 151705   166037   217882  152285 219204 456716
## 4  1982 136038   208159 156060 140942   156637   199388  147697 196705 413095
## 5  1990 141404   210336 147956 146703   150758   195854  145502 198691 415487
## 6  1999 151279   215363 149634 149867   153317   190905  146105 212597 445452
## 7  2007 151108   235178 142722 151543   156793   179751  144164 225789 472330
## 8  2012 149017   241287 139676 152071   158346   173142  143599 228652 496343
## # … with 11 more variables: Marseille &lt;int&gt;, Montpellier &lt;int&gt;, Nantes &lt;int&gt;,
## #   Nice &lt;int&gt;, Paris &lt;int&gt;, Reims &lt;int&gt;, Rennes &lt;int&gt;, Saint.Étienne &lt;int&gt;,
## #   Strasbourg &lt;int&gt;, Toulon &lt;int&gt;, Toulouse &lt;int&gt;</code></pre>
</details>
</details>
<p>You can find more information on data import and <a href="https://garrettgman.github.io/tidying/">tidyness</a> on the <a href="https://github.com/rstudio/cheatsheets/raw/master/data-import.pdf">data-import cheatsheet</a> and on the <a href="http://www.sthda.com/english/wiki/tidyr-crucial-step-reshaping-data-with-r-for-easier-analyses">tidyr</a> package.</p>
</div>
<div id="tibbles" class="section level3" number="6.4.2">
<h3><span class="header-section-number">6.4.2</span> Tibbles</h3>
<p>A <code class="sourceCode r">tibble</code> is an enhanced version of the <code class="sourceCode r">data.frame</code> provided by the <code>tidyverse</code> package. The main advantage of <code class="sourceCode r">tibble</code> is that it has easier initialization and nicer printing than <code class="sourceCode r">data.frame</code>, and the performance are also enhanced – especially for the reading from files with <code class="sourceCode r"><span class="fu">read_delim</span>()</code>, <code class="sourceCode r"><span class="fu">read_tsv</span>()</code> and <code class="sourceCode r"><span class="fu">read_csv</span>()</code>. Otherwise, the handling is basically the same.</p>
<p>More on tibbles <a href="https://cran.r-project.org/web/packages/tibble/vignettes/tibble.html">here</a>.</p>
<div class="sourceCode" id="cb318"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb318-1"><a href="data-frames.html#cb318-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb318-2"><a href="data-frames.html#cb318-2" aria-hidden="true" tabindex="-1"></a>( tib <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">x=</span><span class="fu">runif</span>(<span class="fl">1e3</span>), <span class="at">y=</span><span class="fu">cumsum</span>(x)) )</span></code></pre></div>
<pre><code>## # A tibble: 1,000 x 2
##         x     y
##     &lt;dbl&gt; &lt;dbl&gt;
##  1 0.347  0.347
##  2 0.501  0.848
##  3 0.786  1.63 
##  4 0.156  1.79 
##  5 0.293  2.08 
##  6 0.617  2.70 
##  7 0.780  3.48 
##  8 0.0691 3.55 
##  9 0.649  4.20 
## 10 0.812  5.01 
## # … with 990 more rows</code></pre>
<div class="sourceCode" id="cb320"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb320-1"><a href="data-frames.html#cb320-1" aria-hidden="true" tabindex="-1"></a><span class="fu">data.frame</span>(<span class="at">x=</span><span class="fu">runif</span>(<span class="fl">1e3</span>), <span class="at">y=</span><span class="fu">cumsum</span>(x))</span></code></pre></div>
<pre><code>## Error in data.frame(x = runif(1000), y = cumsum(x)): object &#39;x&#39; not found</code></pre>
<div class="sourceCode" id="cb322"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb322-1"><a href="data-frames.html#cb322-1" aria-hidden="true" tabindex="-1"></a><span class="co"># </span><span class="al">ATTENTION</span><span class="co"> subsetting</span></span>
<span id="cb322-2"><a href="data-frames.html#cb322-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Tibbles are quite strict about subsetting. [ always returns another tibble. </span></span>
<span id="cb322-3"><a href="data-frames.html#cb322-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Contrast this with a data frame: sometimes [ returns a data frame and sometimes it just returns a vector:</span></span>
<span id="cb322-4"><a href="data-frames.html#cb322-4" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(tib[[<span class="dv">1</span>]]) <span class="co"># is a vector</span></span></code></pre></div>
<pre><code>## [1] 0.3467960 0.5008826 0.7861490 0.1564262 0.2927269 0.6174004</code></pre>
<div class="sourceCode" id="cb324"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb324-1"><a href="data-frames.html#cb324-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(tib[,<span class="dv">1</span>])  <span class="co"># is a tibble</span></span></code></pre></div>
<pre><code>## # A tibble: 6 x 1
##       x
##   &lt;dbl&gt;
## 1 0.347
## 2 0.501
## 3 0.786
## 4 0.156
## 5 0.293
## 6 0.617</code></pre>
</div>
</div>
<div id="operations-in-the-tidyverse" class="section level2" number="6.5">
<h2><span class="header-section-number">6.5</span> Operations in the tidyverse</h2>
<p>In the end, base R and the <code>tidyverse</code> package provide many efficient functions to perform most of the tasks you would want to perform recursively, thus allowing avoiding explicit for loops.</p>
<p>Here are some examples, and you will find much more <a href="https://dplyr.tidyverse.org/">here</a>. Take a look at the cheatsheet there, it’s really helpful. Note the use of the pipe operator, <code class="sourceCode r"><span class="sc">%&gt;%</span></code>, that allows a clear syntax for successive operations:</p>
<div class="sourceCode" id="cb326"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb326-1"><a href="data-frames.html#cb326-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create a random tibble</span></span>
<span id="cb326-2"><a href="data-frames.html#cb326-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb326-3"><a href="data-frames.html#cb326-3" aria-hidden="true" tabindex="-1"></a>N <span class="ot">&lt;-</span> <span class="dv">500</span></span>
<span id="cb326-4"><a href="data-frames.html#cb326-4" aria-hidden="true" tabindex="-1"></a>dt <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">x     =</span> <span class="fu">rep</span>(<span class="fu">runif</span>(N,<span class="sc">-</span><span class="dv">1</span>,<span class="dv">1</span>),<span class="dv">3</span>), </span>
<span id="cb326-5"><a href="data-frames.html#cb326-5" aria-hidden="true" tabindex="-1"></a>             <span class="at">y     =</span> <span class="fu">runif</span>(N<span class="sc">*</span><span class="dv">3</span>,<span class="sc">-</span><span class="dv">1</span>,<span class="dv">1</span>), </span>
<span id="cb326-6"><a href="data-frames.html#cb326-6" aria-hidden="true" tabindex="-1"></a>             <span class="at">signx =</span> <span class="fu">ifelse</span>(x<span class="sc">&gt;</span><span class="dv">0</span>,<span class="st">&quot;positive&quot;</span>,<span class="st">&quot;negative&quot;</span>),</span>
<span id="cb326-7"><a href="data-frames.html#cb326-7" aria-hidden="true" tabindex="-1"></a>             <span class="at">signy =</span> <span class="fu">ifelse</span>(y<span class="sc">&gt;</span><span class="dv">0</span>,<span class="st">&quot;positive&quot;</span>,<span class="st">&quot;negative&quot;</span>)</span>
<span id="cb326-8"><a href="data-frames.html#cb326-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb326-9"><a href="data-frames.html#cb326-9" aria-hidden="true" tabindex="-1"></a>dt</span></code></pre></div>
<pre><code>## # A tibble: 1,500 x 4
##           x       y signx    signy   
##       &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;    &lt;chr&gt;   
##  1 -0.271   -0.658  negative negative
##  2  0.113   -0.835  positive negative
##  3 -0.0877  -0.367  negative negative
##  4  0.682    0.757  positive positive
##  5  0.887    0.0563 positive positive
##  6 -0.00223 -0.819  negative negative
##  7  0.0784   0.414  positive positive
##  8  0.825   -0.0319 positive negative
##  9 -0.717    0.689  negative positive
## 10  0.230    0.719  positive positive
## # … with 1,490 more rows</code></pre>
<div class="sourceCode" id="cb328"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb328-1"><a href="data-frames.html#cb328-1" aria-hidden="true" tabindex="-1"></a><span class="co"># means/sd by groups of another variable</span></span>
<span id="cb328-2"><a href="data-frames.html#cb328-2" aria-hidden="true" tabindex="-1"></a>dt <span class="sc">%&gt;%</span> </span>
<span id="cb328-3"><a href="data-frames.html#cb328-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(signx) <span class="sc">%&gt;%</span> </span>
<span id="cb328-4"><a href="data-frames.html#cb328-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarise</span>(<span class="at">mean_x =</span> <span class="fu">mean</span>(x), </span>
<span id="cb328-5"><a href="data-frames.html#cb328-5" aria-hidden="true" tabindex="-1"></a>              <span class="at">sd_x   =</span> <span class="fu">sd</span>(x))</span></code></pre></div>
<pre><code>## # A tibble: 2 x 3
##   signx    mean_x  sd_x
## * &lt;chr&gt;     &lt;dbl&gt; &lt;dbl&gt;
## 1 negative -0.492 0.293
## 2 positive  0.553 0.287</code></pre>
<div class="sourceCode" id="cb330"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb330-1"><a href="data-frames.html#cb330-1" aria-hidden="true" tabindex="-1"></a>dt <span class="sc">%&gt;%</span> </span>
<span id="cb330-2"><a href="data-frames.html#cb330-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(signx, signy) <span class="sc">%&gt;%</span> </span>
<span id="cb330-3"><a href="data-frames.html#cb330-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarise</span>(<span class="at">mean_x=</span><span class="fu">mean</span>(x), </span>
<span id="cb330-4"><a href="data-frames.html#cb330-4" aria-hidden="true" tabindex="-1"></a>              <span class="at">mean_y=</span><span class="fu">mean</span>(y))</span></code></pre></div>
<pre><code>## # A tibble: 4 x 4
## # Groups:   signx [2]
##   signx    signy    mean_x mean_y
##   &lt;chr&gt;    &lt;chr&gt;     &lt;dbl&gt;  &lt;dbl&gt;
## 1 negative negative -0.494 -0.514
## 2 negative positive -0.489  0.490
## 3 positive negative  0.539 -0.514
## 4 positive positive  0.566  0.469</code></pre>
<div class="sourceCode" id="cb332"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb332-1"><a href="data-frames.html#cb332-1" aria-hidden="true" tabindex="-1"></a><span class="co"># sorting</span></span>
<span id="cb332-2"><a href="data-frames.html#cb332-2" aria-hidden="true" tabindex="-1"></a>dt <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(x)</span></code></pre></div>
<pre><code>## # A tibble: 1,500 x 4
##         x       y signx    signy   
##     &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;    &lt;chr&gt;   
##  1 -0.999 -0.936  negative negative
##  2 -0.999  0.251  negative positive
##  3 -0.999 -0.779  negative negative
##  4 -0.991  0.0744 negative positive
##  5 -0.991  0.805  negative positive
##  6 -0.991  0.808  negative positive
##  7 -0.988 -0.360  negative negative
##  8 -0.988  0.671  negative positive
##  9 -0.988  0.667  negative positive
## 10 -0.987  0.324  negative positive
## # … with 1,490 more rows</code></pre>
<div class="sourceCode" id="cb334"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb334-1"><a href="data-frames.html#cb334-1" aria-hidden="true" tabindex="-1"></a>dt <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(x, <span class="fu">desc</span>(y))</span></code></pre></div>
<pre><code>## # A tibble: 1,500 x 4
##         x       y signx    signy   
##     &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;    &lt;chr&gt;   
##  1 -0.999  0.251  negative positive
##  2 -0.999 -0.779  negative negative
##  3 -0.999 -0.936  negative negative
##  4 -0.991  0.808  negative positive
##  5 -0.991  0.805  negative positive
##  6 -0.991  0.0744 negative positive
##  7 -0.988  0.671  negative positive
##  8 -0.988  0.667  negative positive
##  9 -0.988 -0.360  negative negative
## 10 -0.987  0.931  negative positive
## # … with 1,490 more rows</code></pre>
<div class="sourceCode" id="cb336"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb336-1"><a href="data-frames.html#cb336-1" aria-hidden="true" tabindex="-1"></a><span class="co"># merge table information</span></span>
<span id="cb336-2"><a href="data-frames.html#cb336-2" aria-hidden="true" tabindex="-1"></a>dt2 <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">signx=</span><span class="fu">c</span>(<span class="st">&quot;positive&quot;</span>,<span class="st">&quot;positive&quot;</span>,<span class="st">&quot;negative&quot;</span>,<span class="st">&quot;negative&quot;</span>), </span>
<span id="cb336-3"><a href="data-frames.html#cb336-3" aria-hidden="true" tabindex="-1"></a>              <span class="at">signy=</span><span class="fu">c</span>(<span class="st">&quot;positive&quot;</span>,<span class="st">&quot;negative&quot;</span>,<span class="st">&quot;positive&quot;</span>,<span class="st">&quot;negative&quot;</span>), </span>
<span id="cb336-4"><a href="data-frames.html#cb336-4" aria-hidden="true" tabindex="-1"></a>              <span class="at">value=</span><span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">FALSE</span>, <span class="cn">TRUE</span>))</span>
<span id="cb336-5"><a href="data-frames.html#cb336-5" aria-hidden="true" tabindex="-1"></a>dt2</span></code></pre></div>
<pre><code>## # A tibble: 4 x 3
##   signx    signy    value
##   &lt;chr&gt;    &lt;chr&gt;    &lt;lgl&gt;
## 1 positive positive TRUE 
## 2 positive negative FALSE
## 3 negative positive FALSE
## 4 negative negative TRUE</code></pre>
<div class="sourceCode" id="cb338"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb338-1"><a href="data-frames.html#cb338-1" aria-hidden="true" tabindex="-1"></a><span class="fu">inner_join</span>(dt,dt2)</span></code></pre></div>
<pre><code>## # A tibble: 1,500 x 5
##           x       y signx    signy    value
##       &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;    &lt;chr&gt;    &lt;lgl&gt;
##  1 -0.271   -0.658  negative negative TRUE 
##  2  0.113   -0.835  positive negative FALSE
##  3 -0.0877  -0.367  negative negative TRUE 
##  4  0.682    0.757  positive positive TRUE 
##  5  0.887    0.0563 positive positive TRUE 
##  6 -0.00223 -0.819  negative negative TRUE 
##  7  0.0784   0.414  positive positive TRUE 
##  8  0.825   -0.0319 positive negative FALSE
##  9 -0.717    0.689  negative positive FALSE
## 10  0.230    0.719  positive positive TRUE 
## # … with 1,490 more rows</code></pre>
<div class="sourceCode" id="cb340"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb340-1"><a href="data-frames.html#cb340-1" aria-hidden="true" tabindex="-1"></a><span class="co"># merge tables row-wise, even if there are missing rows</span></span>
<span id="cb340-2"><a href="data-frames.html#cb340-2" aria-hidden="true" tabindex="-1"></a>dt3 <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">a=</span><span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="at">b=</span><span class="dv">3</span><span class="sc">:</span><span class="dv">5</span>, <span class="at">c=</span><span class="dv">6</span><span class="sc">:</span><span class="dv">8</span>)</span>
<span id="cb340-3"><a href="data-frames.html#cb340-3" aria-hidden="true" tabindex="-1"></a>dt4 <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">a=</span><span class="dv">3</span><span class="sc">:</span><span class="dv">1</span>, <span class="at">c=</span><span class="dv">3</span><span class="sc">:</span><span class="dv">5</span>)</span>
<span id="cb340-4"><a href="data-frames.html#cb340-4" aria-hidden="true" tabindex="-1"></a><span class="fu">bind_rows</span>(dt3,dt4)</span></code></pre></div>
<pre><code>## # A tibble: 6 x 3
##       a     b     c
##   &lt;int&gt; &lt;int&gt; &lt;int&gt;
## 1     1     3     6
## 2     2     4     7
## 3     3     5     8
## 4     3    NA     3
## 5     2    NA     4
## 6     1    NA     5</code></pre>
<div class="sourceCode" id="cb342"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb342-1"><a href="data-frames.html#cb342-1" aria-hidden="true" tabindex="-1"></a><span class="co"># add/modify a column</span></span>
<span id="cb342-2"><a href="data-frames.html#cb342-2" aria-hidden="true" tabindex="-1"></a>dt <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">w=</span><span class="fu">seq_along</span>(x), <span class="at">z=</span><span class="fu">sin</span>(x))</span></code></pre></div>
<pre><code>## # A tibble: 1,500 x 6
##           x       y signx    signy        w        z
##       &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;    &lt;chr&gt;    &lt;int&gt;    &lt;dbl&gt;
##  1 -0.271   -0.658  negative negative     1 -0.267  
##  2  0.113   -0.835  positive negative     2  0.113  
##  3 -0.0877  -0.367  negative negative     3 -0.0876 
##  4  0.682    0.757  positive positive     4  0.631  
##  5  0.887    0.0563 positive positive     5  0.775  
##  6 -0.00223 -0.819  negative negative     6 -0.00223
##  7  0.0784   0.414  positive positive     7  0.0783 
##  8  0.825   -0.0319 positive negative     8  0.735  
##  9 -0.717    0.689  negative positive     9 -0.657  
## 10  0.230    0.719  positive positive    10  0.228  
## # … with 1,490 more rows</code></pre>
<div class="sourceCode" id="cb344"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb344-1"><a href="data-frames.html#cb344-1" aria-hidden="true" tabindex="-1"></a>dt <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">x=</span><span class="fu">seq_along</span>(x))</span></code></pre></div>
<pre><code>## # A tibble: 1,500 x 4
##        x       y signx    signy   
##    &lt;int&gt;   &lt;dbl&gt; &lt;chr&gt;    &lt;chr&gt;   
##  1     1 -0.658  negative negative
##  2     2 -0.835  positive negative
##  3     3 -0.367  negative negative
##  4     4  0.757  positive positive
##  5     5  0.0563 positive positive
##  6     6 -0.819  negative negative
##  7     7  0.414  positive positive
##  8     8 -0.0319 positive negative
##  9     9  0.689  negative positive
## 10    10  0.719  positive positive
## # … with 1,490 more rows</code></pre>
<div class="sourceCode" id="cb346"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb346-1"><a href="data-frames.html#cb346-1" aria-hidden="true" tabindex="-1"></a><span class="co"># selecting columns</span></span>
<span id="cb346-2"><a href="data-frames.html#cb346-2" aria-hidden="true" tabindex="-1"></a>dt <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="fu">starts_with</span>(<span class="st">&quot;sign&quot;</span>))</span></code></pre></div>
<pre><code>## # A tibble: 1,500 x 2
##    signx    signy   
##    &lt;chr&gt;    &lt;chr&gt;   
##  1 negative negative
##  2 positive negative
##  3 negative negative
##  4 positive positive
##  5 positive positive
##  6 negative negative
##  7 positive positive
##  8 positive negative
##  9 negative positive
## 10 positive positive
## # … with 1,490 more rows</code></pre>
<div class="sourceCode" id="cb348"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb348-1"><a href="data-frames.html#cb348-1" aria-hidden="true" tabindex="-1"></a>dt <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="fu">contains</span>(<span class="st">&quot;x&quot;</span>))</span></code></pre></div>
<pre><code>## # A tibble: 1,500 x 2
##           x signx   
##       &lt;dbl&gt; &lt;chr&gt;   
##  1 -0.271   negative
##  2  0.113   positive
##  3 -0.0877  negative
##  4  0.682   positive
##  5  0.887   positive
##  6 -0.00223 negative
##  7  0.0784  positive
##  8  0.825   positive
##  9 -0.717   negative
## 10  0.230   positive
## # … with 1,490 more rows</code></pre>
<div class="sourceCode" id="cb350"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb350-1"><a href="data-frames.html#cb350-1" aria-hidden="true" tabindex="-1"></a>dt <span class="sc">%&gt;%</span> <span class="fu">select</span>(x)  <span class="co"># only x</span></span></code></pre></div>
<pre><code>## # A tibble: 1,500 x 1
##           x
##       &lt;dbl&gt;
##  1 -0.271  
##  2  0.113  
##  3 -0.0877 
##  4  0.682  
##  5  0.887  
##  6 -0.00223
##  7  0.0784 
##  8  0.825  
##  9 -0.717  
## 10  0.230  
## # … with 1,490 more rows</code></pre>
<div class="sourceCode" id="cb352"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb352-1"><a href="data-frames.html#cb352-1" aria-hidden="true" tabindex="-1"></a>dt <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">-</span>x) <span class="co"># all but x</span></span></code></pre></div>
<pre><code>## # A tibble: 1,500 x 3
##          y signx    signy   
##      &lt;dbl&gt; &lt;chr&gt;    &lt;chr&gt;   
##  1 -0.658  negative negative
##  2 -0.835  positive negative
##  3 -0.367  negative negative
##  4  0.757  positive positive
##  5  0.0563 positive positive
##  6 -0.819  negative negative
##  7  0.414  positive positive
##  8 -0.0319 positive negative
##  9  0.689  negative positive
## 10  0.719  positive positive
## # … with 1,490 more rows</code></pre>
<div class="sourceCode" id="cb354"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb354-1"><a href="data-frames.html#cb354-1" aria-hidden="true" tabindex="-1"></a><span class="co"># filtering columns</span></span>
<span id="cb354-2"><a href="data-frames.html#cb354-2" aria-hidden="true" tabindex="-1"></a>dt <span class="sc">%&gt;%</span> <span class="fu">filter</span>(signx<span class="sc">==</span><span class="st">&quot;positive&quot;</span>)</span></code></pre></div>
<pre><code>## # A tibble: 708 x 4
##         x       y signx    signy   
##     &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;    &lt;chr&gt;   
##  1 0.113  -0.835  positive negative
##  2 0.682   0.757  positive positive
##  3 0.887   0.0563 positive positive
##  4 0.0784  0.414  positive positive
##  5 0.825  -0.0319 positive negative
##  6 0.230   0.719  positive positive
##  7 0.760   0.784  positive positive
##  8 0.968  -0.888  positive negative
##  9 0.943   0.655  positive positive
## 10 0.557  -0.823  positive negative
## # … with 698 more rows</code></pre>
<div class="sourceCode" id="cb356"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb356-1"><a href="data-frames.html#cb356-1" aria-hidden="true" tabindex="-1"></a>dt <span class="sc">%&gt;%</span> <span class="fu">filter</span>(x<span class="sc">&lt;</span><span class="dv">0</span>, y<span class="sc">&gt;</span>.<span class="dv">1</span>)</span></code></pre></div>
<pre><code>## # A tibble: 337 x 4
##         x     y signx    signy   
##     &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;    &lt;chr&gt;   
##  1 -0.717 0.689 negative positive
##  2 -0.974 0.155 negative positive
##  3 -0.562 0.655 negative positive
##  4 -0.509 0.593 negative positive
##  5 -0.410 0.817 negative positive
##  6 -0.369 0.543 negative positive
##  7 -0.314 0.881 negative positive
##  8 -0.204 0.815 negative positive
##  9 -0.661 0.473 negative positive
## 10 -0.620 0.601 negative positive
## # … with 327 more rows</code></pre>
<div class="sourceCode" id="cb358"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb358-1"><a href="data-frames.html#cb358-1" aria-hidden="true" tabindex="-1"></a><span class="co"># reorder columns</span></span>
<span id="cb358-2"><a href="data-frames.html#cb358-2" aria-hidden="true" tabindex="-1"></a>dt <span class="sc">%&gt;%</span> <span class="fu">relocate</span>(y, <span class="at">.after =</span> signy)</span></code></pre></div>
<pre><code>## # A tibble: 1,500 x 4
##           x signx    signy          y
##       &lt;dbl&gt; &lt;chr&gt;    &lt;chr&gt;      &lt;dbl&gt;
##  1 -0.271   negative negative -0.658 
##  2  0.113   positive negative -0.835 
##  3 -0.0877  negative negative -0.367 
##  4  0.682   positive positive  0.757 
##  5  0.887   positive positive  0.0563
##  6 -0.00223 negative negative -0.819 
##  7  0.0784  positive positive  0.414 
##  8  0.825   positive negative -0.0319
##  9 -0.717   negative positive  0.689 
## 10  0.230   positive positive  0.719 
## # … with 1,490 more rows</code></pre>
<div class="sourceCode" id="cb360"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb360-1"><a href="data-frames.html#cb360-1" aria-hidden="true" tabindex="-1"></a><span class="co"># separate columns into multiple ones based on separators</span></span>
<span id="cb360-2"><a href="data-frames.html#cb360-2" aria-hidden="true" tabindex="-1"></a>dt5 <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">file=</span><span class="fu">list.files</span>(<span class="at">path=</span><span class="st">&quot;Exo/FTIR/Data/&quot;</span>))</span>
<span id="cb360-3"><a href="data-frames.html#cb360-3" aria-hidden="true" tabindex="-1"></a>dt5</span></code></pre></div>
<pre><code>## # A tibble: 10 x 1
##    file             
##    &lt;chr&gt;            
##  1 sample_0_25C.xls 
##  2 sample_0_300C.xls
##  3 sample_1_25C.xls 
##  4 sample_1_300C.xls
##  5 sample_2_25C.xls 
##  6 sample_2_300C.xls
##  7 sample_3_25C.xls 
##  8 sample_3_300C.xls
##  9 sample_4_25C.xls 
## 10 sample_4_300C.xls</code></pre>
<div class="sourceCode" id="cb362"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb362-1"><a href="data-frames.html#cb362-1" aria-hidden="true" tabindex="-1"></a>dt5 <span class="sc">%&gt;%</span> <span class="fu">separate</span>(file, <span class="fu">c</span>(<span class="cn">NA</span>, <span class="st">&quot;sample&quot;</span>, <span class="st">&quot;temperature&quot;</span>, <span class="cn">NA</span>), <span class="at">convert =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>## # A tibble: 10 x 2
##    sample temperature
##     &lt;int&gt; &lt;chr&gt;      
##  1      0 25C        
##  2      0 300C       
##  3      1 25C        
##  4      1 300C       
##  5      2 25C        
##  6      2 300C       
##  7      3 25C        
##  8      3 300C       
##  9      4 25C        
## 10      4 300C</code></pre>
<div class="sourceCode" id="cb364"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb364-1"><a href="data-frames.html#cb364-1" aria-hidden="true" tabindex="-1"></a><span class="co"># apply a function recursively on each element of a column with map()</span></span>
<span id="cb364-2"><a href="data-frames.html#cb364-2" aria-hidden="true" tabindex="-1"></a>dt6 <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">file=</span><span class="fu">list.files</span>(<span class="at">path=</span><span class="st">&quot;Exo/spectro/Data/&quot;</span>, <span class="at">pattern =</span> <span class="st">&quot;.txt&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb364-3"><a href="data-frames.html#cb364-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">data =</span> <span class="fu">map</span>(file, </span>
<span id="cb364-4"><a href="data-frames.html#cb364-4" aria-hidden="true" tabindex="-1"></a>                      <span class="sc">~</span><span class="fu">read_table2</span>(<span class="fu">file.path</span>(<span class="st">&quot;Exo/spectro/Data&quot;</span>, .),</span>
<span id="cb364-5"><a href="data-frames.html#cb364-5" aria-hidden="true" tabindex="-1"></a>                                   <span class="at">col_names =</span> <span class="fu">c</span>(<span class="st">&quot;w&quot;</span>, <span class="st">&quot;int&quot;</span>))</span>
<span id="cb364-6"><a href="data-frames.html#cb364-6" aria-hidden="true" tabindex="-1"></a>                      ),</span>
<span id="cb364-7"><a href="data-frames.html#cb364-7" aria-hidden="true" tabindex="-1"></a>           <span class="at">fit =</span> <span class="fu">map</span>(data, <span class="sc">~</span><span class="fu">nls</span>(<span class="at">data=</span>., </span>
<span id="cb364-8"><a href="data-frames.html#cb364-8" aria-hidden="true" tabindex="-1"></a>                                int <span class="sc">~</span> y0<span class="sc">+</span>A1<span class="sc">*</span><span class="fu">Lor</span>(w, w1, sd1)<span class="sc">+</span>A2<span class="sc">*</span><span class="fu">Lor</span>(w, w2, sd2),</span>
<span id="cb364-9"><a href="data-frames.html#cb364-9" aria-hidden="true" tabindex="-1"></a>                                <span class="at">start=</span><span class="fu">list</span>(<span class="at">y0  =</span> .<span class="dv">1</span>,</span>
<span id="cb364-10"><a href="data-frames.html#cb364-10" aria-hidden="true" tabindex="-1"></a>                                           <span class="at">A1  =</span> <span class="fu">max</span>(.<span class="sc">$</span>int)<span class="sc">*</span><span class="dv">10</span>, </span>
<span id="cb364-11"><a href="data-frames.html#cb364-11" aria-hidden="true" tabindex="-1"></a>                                           <span class="at">A2  =</span> <span class="fu">max</span>(.<span class="sc">$</span>int)<span class="sc">*</span><span class="dv">10</span>,</span>
<span id="cb364-12"><a href="data-frames.html#cb364-12" aria-hidden="true" tabindex="-1"></a>                                           <span class="at">w1  =</span> .<span class="sc">$</span>w[<span class="fu">which.max</span>(.<span class="sc">$</span>int)],</span>
<span id="cb364-13"><a href="data-frames.html#cb364-13" aria-hidden="true" tabindex="-1"></a>                                           <span class="at">w2  =</span> .<span class="sc">$</span>w[<span class="fu">which.max</span>(.<span class="sc">$</span>int)]<span class="sc">-</span><span class="dv">30</span>,</span>
<span id="cb364-14"><a href="data-frames.html#cb364-14" aria-hidden="true" tabindex="-1"></a>                                           <span class="at">sd1 =</span> <span class="dv">10</span>, <span class="at">sd2 =</span> <span class="dv">10</span>))</span>
<span id="cb364-15"><a href="data-frames.html#cb364-15" aria-hidden="true" tabindex="-1"></a>                     ),</span>
<span id="cb364-16"><a href="data-frames.html#cb364-16" aria-hidden="true" tabindex="-1"></a>           <span class="at">tidied =</span> <span class="fu">map</span>(fit, broom<span class="sc">::</span>tidy),</span>
<span id="cb364-17"><a href="data-frames.html#cb364-17" aria-hidden="true" tabindex="-1"></a>           <span class="at">mean_int =</span> <span class="fu">map_dbl</span>(data, <span class="sc">~</span><span class="fu">mean</span>(.<span class="sc">$</span>int))</span>
<span id="cb364-18"><a href="data-frames.html#cb364-18" aria-hidden="true" tabindex="-1"></a>           )</span>
<span id="cb364-19"><a href="data-frames.html#cb364-19" aria-hidden="true" tabindex="-1"></a>dt6</span></code></pre></div>
<pre><code>## # A tibble: 17 x 5
##    file         data                      fit    tidied           mean_int
##    &lt;chr&gt;        &lt;list&gt;                    &lt;list&gt; &lt;list&gt;              &lt;dbl&gt;
##  1 rubis_01.txt &lt;spec_tbl_df [1,015 × 2]&gt; &lt;nls&gt;  &lt;tibble [7 × 5]&gt;     443.
##  2 rubis_02.txt &lt;spec_tbl_df [1,015 × 2]&gt; &lt;nls&gt;  &lt;tibble [7 × 5]&gt;     192.
##  3 rubis_03.txt &lt;spec_tbl_df [1,015 × 2]&gt; &lt;nls&gt;  &lt;tibble [7 × 5]&gt;     194.
##  4 rubis_04.txt &lt;spec_tbl_df [1,015 × 2]&gt; &lt;nls&gt;  &lt;tibble [7 × 5]&gt;     443.
##  5 rubis_05.txt &lt;spec_tbl_df [1,015 × 2]&gt; &lt;nls&gt;  &lt;tibble [7 × 5]&gt;     505.
##  6 rubis_06.txt &lt;spec_tbl_df [1,015 × 2]&gt; &lt;nls&gt;  &lt;tibble [7 × 5]&gt;     403.
##  7 rubis_07.txt &lt;spec_tbl_df [1,015 × 2]&gt; &lt;nls&gt;  &lt;tibble [7 × 5]&gt;     569.
##  8 rubis_08.txt &lt;spec_tbl_df [1,015 × 2]&gt; &lt;nls&gt;  &lt;tibble [7 × 5]&gt;     503.
##  9 rubis_10.txt &lt;spec_tbl_df [1,015 × 2]&gt; &lt;nls&gt;  &lt;tibble [7 × 5]&gt;     374.
## 10 rubis_12.txt &lt;spec_tbl_df [1,015 × 2]&gt; &lt;nls&gt;  &lt;tibble [7 × 5]&gt;     297.
## 11 rubis_14.txt &lt;spec_tbl_df [1,015 × 2]&gt; &lt;nls&gt;  &lt;tibble [7 × 5]&gt;     182.
## 12 rubis_17.txt &lt;spec_tbl_df [1,015 × 2]&gt; &lt;nls&gt;  &lt;tibble [7 × 5]&gt;    2074.
## 13 rubis_21.txt &lt;spec_tbl_df [1,015 × 2]&gt; &lt;nls&gt;  &lt;tibble [7 × 5]&gt;     592.
## 14 rubis_23.txt &lt;spec_tbl_df [1,015 × 2]&gt; &lt;nls&gt;  &lt;tibble [7 × 5]&gt;     380.
## 15 rubis_25.txt &lt;spec_tbl_df [1,015 × 2]&gt; &lt;nls&gt;  &lt;tibble [7 × 5]&gt;     911.
## 16 rubis_27.txt &lt;spec_tbl_df [1,015 × 2]&gt; &lt;nls&gt;  &lt;tibble [7 × 5]&gt;     554.
## 17 rubis_29.txt &lt;spec_tbl_df [1,015 × 2]&gt; &lt;nls&gt;  &lt;tibble [7 × 5]&gt;     496.</code></pre>
<div class="sourceCode" id="cb366"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb366-1"><a href="data-frames.html#cb366-1" aria-hidden="true" tabindex="-1"></a><span class="co"># un-nesting data</span></span>
<span id="cb366-2"><a href="data-frames.html#cb366-2" aria-hidden="true" tabindex="-1"></a>dt7 <span class="ot">&lt;-</span> dt6 <span class="sc">%&gt;%</span> <span class="fu">unnest</span>(tidied)</span>
<span id="cb366-3"><a href="data-frames.html#cb366-3" aria-hidden="true" tabindex="-1"></a>dt7</span></code></pre></div>
<pre><code>## # A tibble: 119 x 9
##    file    data      fit   term  estimate std.error statistic   p.value mean_int
##    &lt;chr&gt;   &lt;list&gt;    &lt;lis&gt; &lt;chr&gt;    &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;
##  1 rubis_… &lt;spec_tb… &lt;nls&gt; y0        72.4    2.04        35.5 5.55e-180     443.
##  2 rubis_… &lt;spec_tb… &lt;nls&gt; A1     69772.   320.         218.  0.            443.
##  3 rubis_… &lt;spec_tb… &lt;nls&gt; A2     34316.   265.         129.  0.            443.
##  4 rubis_… &lt;spec_tb… &lt;nls&gt; w1      3203.     0.0271  118214.  0.            443.
##  5 rubis_… &lt;spec_tb… &lt;nls&gt; w2      3173.     0.0350   90577.  0.            443.
##  6 rubis_… &lt;spec_tb… &lt;nls&gt; sd1       14.5    0.0860     169.  0.            443.
##  7 rubis_… &lt;spec_tb… &lt;nls&gt; sd2       10.8    0.109       99.0 0.            443.
##  8 rubis_… &lt;spec_tb… &lt;nls&gt; y0        29.5    0.485       60.7 0.            192.
##  9 rubis_… &lt;spec_tb… &lt;nls&gt; A1     30567.    66.3        461.  0.            192.
## 10 rubis_… &lt;spec_tb… &lt;nls&gt; A2     14754.    55.6        265.  0.            192.
## # … with 109 more rows</code></pre>
<div class="sourceCode" id="cb368"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb368-1"><a href="data-frames.html#cb368-1" aria-hidden="true" tabindex="-1"></a><span class="co"># nesting data per repeated values in a column (~equivalent to grouping)</span></span>
<span id="cb368-2"><a href="data-frames.html#cb368-2" aria-hidden="true" tabindex="-1"></a>dt7 <span class="sc">%&gt;%</span> <span class="fu">nest</span>(<span class="at">data=</span><span class="sc">-</span>file)</span></code></pre></div>
<pre><code>## # A tibble: 17 x 2
##    file         data            
##    &lt;chr&gt;        &lt;list&gt;          
##  1 rubis_01.txt &lt;tibble [7 × 8]&gt;
##  2 rubis_02.txt &lt;tibble [7 × 8]&gt;
##  3 rubis_03.txt &lt;tibble [7 × 8]&gt;
##  4 rubis_04.txt &lt;tibble [7 × 8]&gt;
##  5 rubis_05.txt &lt;tibble [7 × 8]&gt;
##  6 rubis_06.txt &lt;tibble [7 × 8]&gt;
##  7 rubis_07.txt &lt;tibble [7 × 8]&gt;
##  8 rubis_08.txt &lt;tibble [7 × 8]&gt;
##  9 rubis_10.txt &lt;tibble [7 × 8]&gt;
## 10 rubis_12.txt &lt;tibble [7 × 8]&gt;
## 11 rubis_14.txt &lt;tibble [7 × 8]&gt;
## 12 rubis_17.txt &lt;tibble [7 × 8]&gt;
## 13 rubis_21.txt &lt;tibble [7 × 8]&gt;
## 14 rubis_23.txt &lt;tibble [7 × 8]&gt;
## 15 rubis_25.txt &lt;tibble [7 × 8]&gt;
## 16 rubis_27.txt &lt;tibble [7 × 8]&gt;
## 17 rubis_29.txt &lt;tibble [7 × 8]&gt;</code></pre>
<div class="sourceCode" id="cb370"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb370-1"><a href="data-frames.html#cb370-1" aria-hidden="true" tabindex="-1"></a>dt7 <span class="sc">%&gt;%</span> <span class="fu">nest</span>(<span class="at">data=</span><span class="sc">-</span><span class="fu">c</span>(file, mean_int))</span></code></pre></div>
<pre><code>## # A tibble: 17 x 3
##    file         mean_int data            
##    &lt;chr&gt;           &lt;dbl&gt; &lt;list&gt;          
##  1 rubis_01.txt     443. &lt;tibble [7 × 7]&gt;
##  2 rubis_02.txt     192. &lt;tibble [7 × 7]&gt;
##  3 rubis_03.txt     194. &lt;tibble [7 × 7]&gt;
##  4 rubis_04.txt     443. &lt;tibble [7 × 7]&gt;
##  5 rubis_05.txt     505. &lt;tibble [7 × 7]&gt;
##  6 rubis_06.txt     403. &lt;tibble [7 × 7]&gt;
##  7 rubis_07.txt     569. &lt;tibble [7 × 7]&gt;
##  8 rubis_08.txt     503. &lt;tibble [7 × 7]&gt;
##  9 rubis_10.txt     374. &lt;tibble [7 × 7]&gt;
## 10 rubis_12.txt     297. &lt;tibble [7 × 7]&gt;
## 11 rubis_14.txt     182. &lt;tibble [7 × 7]&gt;
## 12 rubis_17.txt    2074. &lt;tibble [7 × 7]&gt;
## 13 rubis_21.txt     592. &lt;tibble [7 × 7]&gt;
## 14 rubis_23.txt     380. &lt;tibble [7 × 7]&gt;
## 15 rubis_25.txt     911. &lt;tibble [7 × 7]&gt;
## 16 rubis_27.txt     554. &lt;tibble [7 × 7]&gt;
## 17 rubis_29.txt     496. &lt;tibble [7 × 7]&gt;</code></pre>
<div class="sourceCode" id="cb372"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb372-1"><a href="data-frames.html#cb372-1" aria-hidden="true" tabindex="-1"></a><span class="co"># providing data to ggplot</span></span>
<span id="cb372-2"><a href="data-frames.html#cb372-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb372-3"><a href="data-frames.html#cb372-3" aria-hidden="true" tabindex="-1"></a>dt <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="fu">abs</span>(y)<span class="sc">&gt;</span> <span class="fl">0.1</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb372-4"><a href="data-frames.html#cb372-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>x, <span class="at">y=</span>y, <span class="at">color=</span>signy))<span class="sc">+</span></span>
<span id="cb372-5"><a href="data-frames.html#cb372-5" aria-hidden="true" tabindex="-1"></a>        <span class="fu">geom_point</span>()</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-37-1.png" width="100%" /></p>
</div>
<div id="exo-df" class="section level2" number="6.6">
<h2><span class="header-section-number">6.6</span> Exercises</h2>
<details>
<summary>
<strong>Exercise 1</strong>
</summary>
<ul>
<li>Create a 3 column <code class="sourceCode r">data.frame</code> containing 10 random values, their sinus, and the sum of the two first columns.</li>
<li>Print the 4 first lines of the table</li>
<li>Print the second column</li>
<li>Print the average of the third column</li>
<li>Using <code class="sourceCode r"><span class="fu">plot</span>(x,y)</code> where <code>x</code> and <code>y</code> are vectors, plot the 2nd column as a function of the first</li>
<li>Look into the function <code class="sourceCode r"><span class="fu">write.table</span>()</code> to write a text file containing this <code class="sourceCode r">data.frame</code></li>
<li>Do the all the same things with a <code class="sourceCode r">tibble</code></li>
</ul>
<details>
<summary>
Solution
</summary>
<div class="sourceCode" id="cb373"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb373-1"><a href="data-frames.html#cb373-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a 3 column `data.frame`{.R} containing 10 random values, their sinus, </span></span>
<span id="cb373-2"><a href="data-frames.html#cb373-2" aria-hidden="true" tabindex="-1"></a><span class="co"># and the sum of the two first columns.</span></span>
<span id="cb373-3"><a href="data-frames.html#cb373-3" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">runif</span>(<span class="dv">10</span>)</span>
<span id="cb373-4"><a href="data-frames.html#cb373-4" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">sin</span>(x)</span>
<span id="cb373-5"><a href="data-frames.html#cb373-5" aria-hidden="true" tabindex="-1"></a>z <span class="ot">&lt;-</span> x <span class="sc">+</span> y</span>
<span id="cb373-6"><a href="data-frames.html#cb373-6" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">x=</span>x, <span class="at">y=</span>y, <span class="at">z=</span>z)</span>
<span id="cb373-7"><a href="data-frames.html#cb373-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Print the 4 first lines of the table</span></span>
<span id="cb373-8"><a href="data-frames.html#cb373-8" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(df, <span class="dv">4</span>)</span></code></pre></div>
<pre><code>##            x          y          z
## 1 0.04947240 0.04945222 0.09892463
## 2 0.17745875 0.17652880 0.35398755
## 3 0.81250141 0.72600962 1.53851103
## 4 0.09389987 0.09376194 0.18766181</code></pre>
<div class="sourceCode" id="cb375"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb375-1"><a href="data-frames.html#cb375-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Print the second column</span></span>
<span id="cb375-2"><a href="data-frames.html#cb375-2" aria-hidden="true" tabindex="-1"></a>df[,<span class="dv">2</span>]</span></code></pre></div>
<pre><code>##  [1] 0.04945222 0.17652880 0.72600962 0.09376194 0.71512707 0.47323936
##  [7] 0.03305472 0.23246783 0.63010501 0.78112687</code></pre>
<div class="sourceCode" id="cb377"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb377-1"><a href="data-frames.html#cb377-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Print the average of the third column</span></span>
<span id="cb377-2"><a href="data-frames.html#cb377-2" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(df<span class="sc">$</span>z); <span class="fu">mean</span>(df[<span class="dv">3</span>]); <span class="fu">mean</span>(df[,<span class="dv">3</span>])</span></code></pre></div>
<pre><code>## [1] 0.8179808</code></pre>
<pre><code>## Warning in mean.default(df[3]): argument is not numeric or logical: returning NA</code></pre>
<pre><code>## [1] NA</code></pre>
<pre><code>## [1] 0.8179808</code></pre>
<div class="sourceCode" id="cb382"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb382-1"><a href="data-frames.html#cb382-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Using `plot(x,y)`{.R} where `x` and `y` are vectors, </span></span>
<span id="cb382-2"><a href="data-frames.html#cb382-2" aria-hidden="true" tabindex="-1"></a><span class="co"># plot the 2nd column as a function of the first</span></span>
<span id="cb382-3"><a href="data-frames.html#cb382-3" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(df[,<span class="dv">1</span>], df[,<span class="dv">2</span>])</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-38-1.png" width="100%" /></p>
<div class="sourceCode" id="cb383"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb383-1"><a href="data-frames.html#cb383-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(df<span class="sc">$</span>x, df<span class="sc">$</span>y)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-38-2.png" width="100%" /></p>
<div class="sourceCode" id="cb384"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb384-1"><a href="data-frames.html#cb384-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Look into the function `write.table()`{.R} to write a text file </span></span>
<span id="cb384-2"><a href="data-frames.html#cb384-2" aria-hidden="true" tabindex="-1"></a><span class="co"># containing this `data.frame`{.R}</span></span>
<span id="cb384-3"><a href="data-frames.html#cb384-3" aria-hidden="true" tabindex="-1"></a><span class="fu">write.table</span>(df, <span class="st">&quot;Data/some_data.dat&quot;</span>, <span class="at">quote =</span> <span class="cn">FALSE</span>, <span class="at">row.names =</span> <span class="cn">FALSE</span>)</span>
<span id="cb384-4"><a href="data-frames.html#cb384-4" aria-hidden="true" tabindex="-1"></a><span class="co"># # # # # # # # # # # # # # # # # </span></span>
<span id="cb384-5"><a href="data-frames.html#cb384-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Tibble version</span></span>
<span id="cb384-6"><a href="data-frames.html#cb384-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb384-7"><a href="data-frames.html#cb384-7" aria-hidden="true" tabindex="-1"></a>df_tib <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">a =</span> <span class="fu">runif</span>(<span class="dv">10</span>), <span class="at">b =</span> <span class="fu">sin</span>(a), <span class="at">c =</span> a <span class="sc">+</span> b)</span>
<span id="cb384-8"><a href="data-frames.html#cb384-8" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(df_tib, <span class="dv">4</span>)</span></code></pre></div>
<pre><code>## # A tibble: 4 x 3
##        a      b     c
##    &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt;
## 1 0.0690 0.0689 0.138
## 2 0.801  0.718  1.52 
## 3 0.785  0.707  1.49 
## 4 0.315  0.310  0.625</code></pre>
<div class="sourceCode" id="cb386"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb386-1"><a href="data-frames.html#cb386-1" aria-hidden="true" tabindex="-1"></a>df_tib[,<span class="dv">2</span>]; df_tib[[<span class="dv">2</span>]];</span></code></pre></div>
<pre><code>## # A tibble: 10 x 1
##         b
##     &lt;dbl&gt;
##  1 0.0689
##  2 0.718 
##  3 0.707 
##  4 0.310 
##  5 0.711 
##  6 0.826 
##  7 0.803 
##  8 0.428 
##  9 0.837 
## 10 0.0293</code></pre>
<pre><code>##  [1] 0.06894169 0.71782511 0.70696568 0.30978216 0.71118294 0.82621172
##  [7] 0.80256580 0.42848281 0.83747999 0.02930559</code></pre>
<div class="sourceCode" id="cb389"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb389-1"><a href="data-frames.html#cb389-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(df_tib<span class="sc">$</span>c); <span class="fu">mean</span>(df_tib[<span class="dv">3</span>]); <span class="fu">mean</span>(df_tib[,<span class="dv">3</span>]); <span class="fu">mean</span>(df_tib[[<span class="dv">3</span>]])</span></code></pre></div>
<pre><code>## [1] 1.156847</code></pre>
<pre><code>## Warning in mean.default(df_tib[3]): argument is not numeric or logical:
## returning NA</code></pre>
<pre><code>## [1] NA</code></pre>
<pre><code>## Warning in mean.default(df_tib[, 3]): argument is not numeric or logical:
## returning NA</code></pre>
<pre><code>## [1] NA</code></pre>
<pre><code>## [1] 1.156847</code></pre>
<div class="sourceCode" id="cb396"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb396-1"><a href="data-frames.html#cb396-1" aria-hidden="true" tabindex="-1"></a><span class="fu">write.table</span>(df_tib, <span class="st">&quot;Data/some_data.dat&quot;</span>, <span class="at">quote =</span> <span class="cn">FALSE</span>, <span class="at">row.names =</span> <span class="cn">FALSE</span>)</span>
<span id="cb396-2"><a href="data-frames.html#cb396-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(df_tib<span class="sc">$</span>a, df_tib<span class="sc">$</span>b)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-38-3.png" width="100%" /></p>
</details>
</details>
<details>
<summary>
<strong>Exercise 2</strong>
</summary>
<ul>
<li>Download the files:
<ul>
<li><a href="Data/rubis_01.txt" download target="_blank">rubis_01.txt</a></li>
<li><a href="Data/population.csv" download target="_blank">population.csv</a></li>
<li><a href="Data/FTIR_rocks.xlsx" download target="_blank">FTIR_rocks.xlsx</a></li>
</ul></li>
<li>Load them into separate <code class="sourceCode r">data.frames</code>. Look into the options of <code class="sourceCode r"><span class="fu">read.table</span>()</code>, <code class="sourceCode r"><span class="fu">read.csv</span>()</code>, <code class="sourceCode r">readxl<span class="sc">::</span><span class="fu">read_excel</span>()</code>, to get the proper data fields.</li>
<li>Print their dimensions and column names</li>
<li>Add the appropriate names (“w”, “intensity”) to the data.frame containing rubis_01.txt.</li>
</ul>
<details>
<summary>
Solution
</summary>
<div class="sourceCode" id="cb397"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb397-1"><a href="data-frames.html#cb397-1" aria-hidden="true" tabindex="-1"></a>rubis_01   <span class="ot">&lt;-</span> <span class="fu">read.table</span>(<span class="st">&quot;Data/rubis_01.txt&quot;</span>, <span class="at">col.names =</span> <span class="fu">c</span>(<span class="st">&quot;w&quot;</span>, <span class="st">&quot;intensity&quot;</span>))</span>
<span id="cb397-2"><a href="data-frames.html#cb397-2" aria-hidden="true" tabindex="-1"></a>population <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;Data/population.csv&quot;</span>)</span>
<span id="cb397-3"><a href="data-frames.html#cb397-3" aria-hidden="true" tabindex="-1"></a>FTIR_rocks <span class="ot">&lt;-</span> readxl<span class="sc">::</span><span class="fu">read_excel</span>(<span class="st">&quot;Data/FTIR_rocks.xlsx&quot;</span>)</span>
<span id="cb397-4"><a href="data-frames.html#cb397-4" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(rubis_01); <span class="fu">names</span>(rubis_01)</span></code></pre></div>
<pre><code>## [1] 1015    2</code></pre>
<pre><code>## [1] &quot;w&quot;         &quot;intensity&quot;</code></pre>
<div class="sourceCode" id="cb400"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb400-1"><a href="data-frames.html#cb400-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(population); <span class="fu">names</span>(population)</span></code></pre></div>
<pre><code>## [1]  8 21</code></pre>
<pre><code>##  [1] &quot;year&quot;          &quot;Angers&quot;        &quot;Bordeaux&quot;      &quot;Brest&quot;        
##  [5] &quot;Dijon&quot;         &quot;Grenoble&quot;      &quot;Le.Havre&quot;      &quot;Le.Mans&quot;      
##  [9] &quot;Lille&quot;         &quot;Lyon&quot;          &quot;Marseille&quot;     &quot;Montpellier&quot;  
## [13] &quot;Nantes&quot;        &quot;Nice&quot;          &quot;Paris&quot;         &quot;Reims&quot;        
## [17] &quot;Rennes&quot;        &quot;Saint.Étienne&quot; &quot;Strasbourg&quot;    &quot;Toulon&quot;       
## [21] &quot;Toulouse&quot;</code></pre>
<div class="sourceCode" id="cb403"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb403-1"><a href="data-frames.html#cb403-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(FTIR_rocks); <span class="fu">names</span>(FTIR_rocks)</span></code></pre></div>
<pre><code>## [1] 4718    4</code></pre>
<pre><code>## [1] &quot;wavenumber, cm-1&quot; &quot;rock 1&quot;           &quot;rock 2&quot;           &quot;rock 3&quot;</code></pre>
</details>
</details>
<details>
<summary>
<strong>Exercise 3</strong>: <code class="sourceCode r">data.frame</code> from a “complicated” data file
</summary>
<ul>
<li>Download the TGA data file <a href="Data/ATG.txt" download target="_blank">ATG.txt</a></li>
<li>Load it into a <code class="sourceCode r">data.frame</code>. Look into the options of <code class="sourceCode r"><span class="fu">read.table</span>()</code> to get the proper data fields.</li>
</ul>
<details>
<summary>
Solution
</summary>
<div class="sourceCode" id="cb406"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb406-1"><a href="data-frames.html#cb406-1" aria-hidden="true" tabindex="-1"></a>d <span class="ot">&lt;-</span> <span class="fu">read.table</span>(<span class="st">&quot;Data/ATG.txt&quot;</span>, </span>
<span id="cb406-2"><a href="data-frames.html#cb406-2" aria-hidden="true" tabindex="-1"></a>                <span class="at">skip=</span><span class="dv">12</span>,</span>
<span id="cb406-3"><a href="data-frames.html#cb406-3" aria-hidden="true" tabindex="-1"></a>                <span class="at">header=</span><span class="cn">FALSE</span>, </span>
<span id="cb406-4"><a href="data-frames.html#cb406-4" aria-hidden="true" tabindex="-1"></a>                <span class="at">nrows=</span><span class="dv">4088</span>)</span>
<span id="cb406-5"><a href="data-frames.html#cb406-5" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(d) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Index&quot;</span>, <span class="st">&quot;t&quot;</span>, <span class="st">&quot;Ts&quot;</span>, <span class="st">&quot;Tr&quot;</span>, <span class="st">&quot;Value&quot;</span>)</span>
<span id="cb406-6"><a href="data-frames.html#cb406-6" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(d)</span></code></pre></div>
<pre><code>##   Index  t      Ts Tr   Value
## 1     0  0 32.3769 25 32.9680
## 2     3  3 32.4051 25 32.9655
## 3     6  6 32.4332 25 32.9619
## 4     9  9 32.4726 25 32.9582
## 5    12 12 32.5066 25 32.9544
## 6    15 15 32.5221 25 32.9504</code></pre>
<div class="sourceCode" id="cb408"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb408-1"><a href="data-frames.html#cb408-1" aria-hidden="true" tabindex="-1"></a>d <span class="ot">&lt;-</span> <span class="fu">read.table</span>(<span class="st">&quot;Data/ATG.txt&quot;</span>, </span>
<span id="cb408-2"><a href="data-frames.html#cb408-2" aria-hidden="true" tabindex="-1"></a>                <span class="at">skip=</span><span class="dv">10</span>,</span>
<span id="cb408-3"><a href="data-frames.html#cb408-3" aria-hidden="true" tabindex="-1"></a>                <span class="at">comment.char=</span><span class="st">&quot;[&quot;</span>,</span>
<span id="cb408-4"><a href="data-frames.html#cb408-4" aria-hidden="true" tabindex="-1"></a>                <span class="at">header=</span><span class="cn">TRUE</span>, </span>
<span id="cb408-5"><a href="data-frames.html#cb408-5" aria-hidden="true" tabindex="-1"></a>                <span class="at">nrows=</span><span class="dv">4088</span>)</span>
<span id="cb408-6"><a href="data-frames.html#cb408-6" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(d)</span></code></pre></div>
<pre><code>##   Index  t      Ts Tr   Value
## 1     0  0 32.3769 25 32.9680
## 2     3  3 32.4051 25 32.9655
## 3     6  6 32.4332 25 32.9619
## 4     9  9 32.4726 25 32.9582
## 5    12 12 32.5066 25 32.9544
## 6    15 15 32.5221 25 32.9504</code></pre>
</details>
</details>
<details>
<summary>
<strong>Exercise 4</strong>
</summary>
<ul>
<li>Create a <code class="sourceCode r">data.frame</code> (or a <code class="sourceCode r">tibble</code>) called <code>people</code> from <a href="Data/people.txt" download target="_blank">people.txt</a>. Try using the function <code>read.table</code> or its <code>tidyverse</code> equivalent <code>read_table2</code>.</li>
<li>What are the column names of <code>people</code>?</li>
<li>Add a column <code>age</code> and fill it with the appropriate values
<ul>
<li><em>Bonus Tip:</em> to interactively enter the data, look into the function <code class="sourceCode r"><span class="fu">readline</span>()</code> and try making a <code>for</code> loop</li>
</ul></li>
<li>What is the average age of the class?</li>
<li>How many students are in the class?</li>
<li>What is the percentage of female/male students in the class?</li>
<li>Get the columns 1 and 3</li>
<li>Print <code>people</code> where you removed the rows 1, 5 and 6</li>
<li>Get the columns of <code>age</code> and <code>origin</code> in another <code class="sourceCode r">data.frame</code></li>
<li>Subset <code>people</code> to get the list of people from China and Ukraine in one <code class="sourceCode r">data.frame</code></li>
<li>How many students come from the USA? from France?</li>
<li>Order the <code class="sourceCode r">data.frame</code> <code>people</code> by student name</li>
<li>Order the <code class="sourceCode r">data.frame</code> <code>people</code> by country of origin and then by age</li>
<li>Select 5 random students from <code>people</code></li>
<li>Using the <code>tidyverse</code>, get the average age of females and males in the class in a <code class="sourceCode r">tibble</code></li>
</ul>
</details>
<details>
<summary>
<strong>Exercise 5</strong>
</summary>
<p>Download <a href="Data/population.csv" download target="_blank">population.csv</a> and load it into a <code class="sourceCode r">data.frame</code>.</p>
<ul>
<li>What are the names of the columns?</li>
<li>Are the data tidy? make the table tidy if needed</li>
<li>Create a subset containing the data for Montpellier
<ul>
<li>What is the max and min of population in this city?</li>
<li>The average population over time?</li>
</ul></li>
<li>What is the total population in 2012?</li>
<li>What is the total population per year?</li>
<li>What is the average population per city over the years?</li>
</ul>
<details>
<summary>
Solution
</summary>
<div class="sourceCode" id="cb410"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb410-1"><a href="data-frames.html#cb410-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Download population.txt and load it into a `data.frame`{.R}.</span></span>
<span id="cb410-2"><a href="data-frames.html#cb410-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb410-3"><a href="data-frames.html#cb410-3" aria-hidden="true" tabindex="-1"></a>popul <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;Data/population.csv&quot;</span>)</span>
<span id="cb410-4"><a href="data-frames.html#cb410-4" aria-hidden="true" tabindex="-1"></a><span class="co"># What are the names of the columns and the dimension of the table?</span></span>
<span id="cb410-5"><a href="data-frames.html#cb410-5" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(popul); <span class="fu">dim</span>(popul)</span></code></pre></div>
<pre><code>##  [1] &quot;year&quot;          &quot;Angers&quot;        &quot;Bordeaux&quot;      &quot;Brest&quot;        
##  [5] &quot;Dijon&quot;         &quot;Grenoble&quot;      &quot;Le Havre&quot;      &quot;Le Mans&quot;      
##  [9] &quot;Lille&quot;         &quot;Lyon&quot;          &quot;Marseille&quot;     &quot;Montpellier&quot;  
## [13] &quot;Nantes&quot;        &quot;Nice&quot;          &quot;Paris&quot;         &quot;Reims&quot;        
## [17] &quot;Rennes&quot;        &quot;Saint-Étienne&quot; &quot;Strasbourg&quot;    &quot;Toulon&quot;       
## [21] &quot;Toulouse&quot;</code></pre>
<pre><code>## [1]  8 21</code></pre>
<div class="sourceCode" id="cb413"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb413-1"><a href="data-frames.html#cb413-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Are the data tidy?</span></span>
<span id="cb413-2"><a href="data-frames.html#cb413-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(popul) <span class="co"># no</span></span></code></pre></div>
<pre><code>## # A tibble: 6 x 21
##    year Angers Bordeaux  Brest  Dijon Grenoble `Le Havre` `Le Mans`  Lille
##   &lt;dbl&gt;  &lt;dbl&gt;    &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;    &lt;dbl&gt;      &lt;dbl&gt;     &lt;dbl&gt;  &lt;dbl&gt;
## 1  1962 115273   278403 136104 135694   156707     187845    132181 239955
## 2  1968 128557   266662 154023 145357   161616     207150    143246 238554
## 3  1975 137591   223131 166826 151705   166037     217882    152285 219204
## 4  1982 136038   208159 156060 140942   156637     199388    147697 196705
## 5  1990 141404   210336 147956 146703   150758     195854    145502 198691
## 6  1999 151279   215363 149634 149867   153317     190905    146105 212597
## # … with 12 more variables: Lyon &lt;dbl&gt;, Marseille &lt;dbl&gt;, Montpellier &lt;dbl&gt;,
## #   Nantes &lt;dbl&gt;, Nice &lt;dbl&gt;, Paris &lt;dbl&gt;, Reims &lt;dbl&gt;, Rennes &lt;dbl&gt;,
## #   Saint-Étienne &lt;dbl&gt;, Strasbourg &lt;dbl&gt;, Toulon &lt;dbl&gt;, Toulouse &lt;dbl&gt;</code></pre>
<div class="sourceCode" id="cb415"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb415-1"><a href="data-frames.html#cb415-1" aria-hidden="true" tabindex="-1"></a>popul.tidy <span class="ot">&lt;-</span> popul <span class="sc">%&gt;%</span> </span>
<span id="cb415-2"><a href="data-frames.html#cb415-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">pivot_longer</span>(<span class="at">cols=</span><span class="sc">-</span>year,</span>
<span id="cb415-3"><a href="data-frames.html#cb415-3" aria-hidden="true" tabindex="-1"></a>                 <span class="at">names_to =</span> <span class="st">&quot;city&quot;</span>,</span>
<span id="cb415-4"><a href="data-frames.html#cb415-4" aria-hidden="true" tabindex="-1"></a>                 <span class="at">values_to =</span> <span class="st">&quot;pop&quot;</span></span>
<span id="cb415-5"><a href="data-frames.html#cb415-5" aria-hidden="true" tabindex="-1"></a>                )</span>
<span id="cb415-6"><a href="data-frames.html#cb415-6" aria-hidden="true" tabindex="-1"></a>popul.tidy</span></code></pre></div>
<pre><code>## # A tibble: 160 x 3
##     year city         pop
##    &lt;dbl&gt; &lt;chr&gt;      &lt;dbl&gt;
##  1  1962 Angers    115273
##  2  1962 Bordeaux  278403
##  3  1962 Brest     136104
##  4  1962 Dijon     135694
##  5  1962 Grenoble  156707
##  6  1962 Le Havre  187845
##  7  1962 Le Mans   132181
##  8  1962 Lille     239955
##  9  1962 Lyon      535746
## 10  1962 Marseille 778071
## # … with 150 more rows</code></pre>
<div class="sourceCode" id="cb417"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb417-1"><a href="data-frames.html#cb417-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a subset containing the data for Montpellier</span></span>
<span id="cb417-2"><a href="data-frames.html#cb417-2" aria-hidden="true" tabindex="-1"></a>mtp <span class="ot">&lt;-</span> <span class="fu">subset</span>(popul.tidy, city <span class="sc">==</span> <span class="st">&quot;Montpellier&quot;</span>)</span>
<span id="cb417-3"><a href="data-frames.html#cb417-3" aria-hidden="true" tabindex="-1"></a><span class="co"># I prefer the tidyverse version</span></span>
<span id="cb417-4"><a href="data-frames.html#cb417-4" aria-hidden="true" tabindex="-1"></a>mtp <span class="ot">&lt;-</span> popul.tidy <span class="sc">%&gt;%</span> <span class="fu">filter</span>(city <span class="sc">==</span> <span class="st">&quot;Montpellier&quot;</span>)</span>
<span id="cb417-5"><a href="data-frames.html#cb417-5" aria-hidden="true" tabindex="-1"></a><span class="co"># What is the max and min of population in this city?</span></span>
<span id="cb417-6"><a href="data-frames.html#cb417-6" aria-hidden="true" tabindex="-1"></a><span class="fu">max</span>(mtp<span class="sc">$</span>pop)</span></code></pre></div>
<pre><code>## [1] 268456</code></pre>
<div class="sourceCode" id="cb419"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb419-1"><a href="data-frames.html#cb419-1" aria-hidden="true" tabindex="-1"></a><span class="fu">min</span>(mtp<span class="sc">$</span>pop)</span></code></pre></div>
<pre><code>## [1] 118864</code></pre>
<div class="sourceCode" id="cb421"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb421-1"><a href="data-frames.html#cb421-1" aria-hidden="true" tabindex="-1"></a><span class="fu">range</span>(mtp<span class="sc">$</span>pop)</span></code></pre></div>
<pre><code>## [1] 118864 268456</code></pre>
<div class="sourceCode" id="cb423"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb423-1"><a href="data-frames.html#cb423-1" aria-hidden="true" tabindex="-1"></a><span class="co"># The average population over time?</span></span>
<span id="cb423-2"><a href="data-frames.html#cb423-2" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(mtp<span class="sc">$</span>pop)</span></code></pre></div>
<pre><code>## [1] 203114.4</code></pre>
<div class="sourceCode" id="cb425"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb425-1"><a href="data-frames.html#cb425-1" aria-hidden="true" tabindex="-1"></a><span class="co"># What is the total population in 2012?</span></span>
<span id="cb425-2"><a href="data-frames.html#cb425-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(popul.tidy[popul.tidy<span class="sc">$</span>year <span class="sc">==</span> <span class="dv">2012</span>, <span class="st">&quot;pop&quot;</span>])</span></code></pre></div>
<pre><code>## [1] 7334805</code></pre>
<div class="sourceCode" id="cb427"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb427-1"><a href="data-frames.html#cb427-1" aria-hidden="true" tabindex="-1"></a>popul.tidy <span class="sc">%&gt;%</span> </span>
<span id="cb427-2"><a href="data-frames.html#cb427-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(year<span class="sc">==</span><span class="dv">2012</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb427-3"><a href="data-frames.html#cb427-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(pop) <span class="sc">%&gt;%</span> </span>
<span id="cb427-4"><a href="data-frames.html#cb427-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">sum</span>()</span></code></pre></div>
<pre><code>## [1] 7334805</code></pre>
<div class="sourceCode" id="cb429"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb429-1"><a href="data-frames.html#cb429-1" aria-hidden="true" tabindex="-1"></a><span class="co"># What is the total population per year?</span></span>
<span id="cb429-2"><a href="data-frames.html#cb429-2" aria-hidden="true" tabindex="-1"></a>popul.tidy <span class="sc">%&gt;%</span> </span>
<span id="cb429-3"><a href="data-frames.html#cb429-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(year) <span class="sc">%&gt;%</span> </span>
<span id="cb429-4"><a href="data-frames.html#cb429-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarise</span>(<span class="at">pop_tot=</span><span class="fu">sum</span>(pop))</span></code></pre></div>
<pre><code>## # A tibble: 8 x 2
##    year pop_tot
## * &lt;dbl&gt;   &lt;dbl&gt;
## 1  1962 7349547
## 2  1968 7550999
## 3  1975 7298183
## 4  1982 6933230
## 5  1990 6857291
## 6  1999 6965325
## 7  2007 7235114
## 8  2012 7334805</code></pre>
<div class="sourceCode" id="cb431"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb431-1"><a href="data-frames.html#cb431-1" aria-hidden="true" tabindex="-1"></a><span class="co"># What is the average population per city over the years?</span></span>
<span id="cb431-2"><a href="data-frames.html#cb431-2" aria-hidden="true" tabindex="-1"></a>popul.tidy <span class="sc">%&gt;%</span> </span>
<span id="cb431-3"><a href="data-frames.html#cb431-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(city) <span class="sc">%&gt;%</span> </span>
<span id="cb431-4"><a href="data-frames.html#cb431-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarise</span>(<span class="at">pop_ave=</span><span class="fu">mean</span>(pop))</span></code></pre></div>
<pre><code>## # A tibble: 20 x 2
##    city           pop_ave
##  * &lt;chr&gt;            &lt;dbl&gt;
##  1 Angers         138783.
##  2 Bordeaux       234815.
##  3 Brest          149125.
##  4 Dijon          146735.
##  5 Grenoble       157526.
##  6 Le Havre       193990.
##  7 Le Mans        144347.
##  8 Lille          220018.
##  9 Lyon           470371.
## 10 Marseille      844253.
## 11 Montpellier    203114.
## 12 Nantes         260925.
## 13 Nice           334312.
## 14 Paris         2321032.
## 15 Reims          172278 
## 16 Rennes         193425.
## 17 Saint-Étienne  198135.
## 18 Strasbourg     255429.
## 19 Toulon         169683.
## 20 Toulouse       382265.</code></pre>
</details>
</details>
<details>
<summary>
<strong>Exercise 6:</strong> tidy data wrangling
</summary>
<ul>
<li>First, load the <code>tidyverse</code> and <code>lubridate</code> package</li>
<li>Load <a href="Data/people1.csv" download target="_blank">people1.csv</a> and <a href="Data/people2.csv" download target="_blank">people2.csv</a> into <code>pp1</code> and <code>pp2</code></li>
<li>Create a new tibble <code>pp</code> by using the pipe operator (<code class="sourceCode r"><span class="sc">%&gt;%</span></code>) and successively:
<ul>
<li>joining the two tibbles into one using <code class="sourceCode r"><span class="fu">inner_join</span>()</code></li>
<li>adding a column <code>age</code> containing the age in years (use lubridate’s <code class="sourceCode r"><span class="fu">time_length</span>(x, <span class="st">&#39;years&#39;</span>)</code> with x a time difference in days) by using <code class="sourceCode r"><span class="fu">mutate</span>()</code></li>
</ul></li>
<li>Display a summary of the table using <code class="sourceCode r"><span class="fu">str</span>()</code></li>
<li>Using <code class="sourceCode r"><span class="fu">groupe_by</span>()</code> and <code class="sourceCode r"><span class="fu">summarize</span>()</code>:
<ul>
<li>Show the number of males and females in the table (use the counter <code class="sourceCode r"><span class="fu">n</span>()</code>)</li>
<li>Show the average age per gender</li>
<li>Show the average size per gender and institution</li>
<li>Show the number of people from each country, sorted by descending population (<code class="sourceCode r"><span class="fu">arrange</span>()</code>)</li>
</ul></li>
<li>Using <code class="sourceCode r"><span class="fu">select</span>()</code>, display:
<ul>
<li>only the name and age columns</li>
<li>all but the name column</li>
</ul></li>
<li>Using <code class="sourceCode r"><span class="fu">filter</span>()</code>, show data only for
<ul>
<li>Chinese people</li>
<li>From institution ECL and UCBL</li>
<li>People older than 22</li>
<li>People with a <code>e</code> in their name</li>
</ul></li>
</ul>
<details>
<summary>
Solution
</summary>
<div class="sourceCode" id="cb433"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb433-1"><a href="data-frames.html#cb433-1" aria-hidden="true" tabindex="-1"></a><span class="co"># First, load the `tidyverse` and `lubridate` package</span></span>
<span id="cb433-2"><a href="data-frames.html#cb433-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb433-3"><a href="data-frames.html#cb433-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lubridate)</span>
<span id="cb433-4"><a href="data-frames.html#cb433-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Load people1.csv and people2.csv</span></span>
<span id="cb433-5"><a href="data-frames.html#cb433-5" aria-hidden="true" tabindex="-1"></a>pp1  <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;Data/people1.csv&quot;</span>)</span>
<span id="cb433-6"><a href="data-frames.html#cb433-6" aria-hidden="true" tabindex="-1"></a>pp2  <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;Data/people2.csv&quot;</span>)</span>
<span id="cb433-7"><a href="data-frames.html#cb433-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a new tibble `pp` by using the pipe operator (`%&gt;%`)</span></span>
<span id="cb433-8"><a href="data-frames.html#cb433-8" aria-hidden="true" tabindex="-1"></a><span class="co"># and successively:</span></span>
<span id="cb433-9"><a href="data-frames.html#cb433-9" aria-hidden="true" tabindex="-1"></a><span class="co"># - joining the two tibbles into one using `inner_join()`</span></span>
<span id="cb433-10"><a href="data-frames.html#cb433-10" aria-hidden="true" tabindex="-1"></a><span class="co"># - adding a column `age` containing the age in years </span></span>
<span id="cb433-11"><a href="data-frames.html#cb433-11" aria-hidden="true" tabindex="-1"></a><span class="co">#   (use lubridate&#39;s `time_length(x, &#39;years&#39;)` with x a time</span></span>
<span id="cb433-12"><a href="data-frames.html#cb433-12" aria-hidden="true" tabindex="-1"></a><span class="co">#   difference in days) by using `mutate()`</span></span>
<span id="cb433-13"><a href="data-frames.html#cb433-13" aria-hidden="true" tabindex="-1"></a>pp <span class="ot">&lt;-</span> pp1 <span class="sc">%&gt;%</span> </span>
<span id="cb433-14"><a href="data-frames.html#cb433-14" aria-hidden="true" tabindex="-1"></a>        <span class="fu">inner_join</span>(pp2) <span class="sc">%&gt;%</span> </span>
<span id="cb433-15"><a href="data-frames.html#cb433-15" aria-hidden="true" tabindex="-1"></a>        <span class="fu">mutate</span>(<span class="at">age=</span><span class="fu">time_length</span>(<span class="fu">today</span>()<span class="sc">-</span>dateofbirth,<span class="st">&#39;years&#39;</span>))</span>
<span id="cb433-16"><a href="data-frames.html#cb433-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Display a summary of the table using `str()`</span></span>
<span id="cb433-17"><a href="data-frames.html#cb433-17" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(pp)</span></code></pre></div>
<pre><code>## spec_tbl_df [20 × 7] (S3: spec_tbl_df/tbl_df/tbl/data.frame)
##  $ name       : chr [1:20] &quot;Salem&quot; &quot;Dilruwan-Shanaka-Perera&quot; &quot;Hanna&quot; &quot;Sabin&quot; ...
##  $ gender     : chr [1:20] &quot;Male&quot; &quot;Male&quot; &quot;Female&quot; &quot;Male&quot; ...
##  $ origin     : chr [1:20] &quot;Yemen&quot; &quot;Sri Lanka&quot; &quot;Ukraine&quot; &quot;India&quot; ...
##  $ institution: chr [1:20] &quot;UCBL&quot; &quot;INSA&quot; &quot;ECL&quot; &quot;INSA&quot; ...
##  $ dateofbirth: Date[1:20], format: &quot;1997-12-26&quot; &quot;1997-03-28&quot; ...
##  $ size       : num [1:20] 161 172 165 186 176 ...
##  $ age        : num [1:20] 23.2 23.9 23.2 25.6 25.9 ...
##  - attr(*, &quot;spec&quot;)=
##   .. cols(
##   ..   name = col_character(),
##   ..   gender = col_character(),
##   ..   origin = col_character(),
##   ..   institution = col_character(),
##   ..   dateofbirth = col_date(format = &quot;&quot;)
##   .. )</code></pre>
<div class="sourceCode" id="cb435"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb435-1"><a href="data-frames.html#cb435-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Using `groupe_by()` and `summarize()`:</span></span>
<span id="cb435-2"><a href="data-frames.html#cb435-2" aria-hidden="true" tabindex="-1"></a><span class="co"># - Show the number of males and females in the table </span></span>
<span id="cb435-3"><a href="data-frames.html#cb435-3" aria-hidden="true" tabindex="-1"></a><span class="co">#   (use the counter `n()`)</span></span>
<span id="cb435-4"><a href="data-frames.html#cb435-4" aria-hidden="true" tabindex="-1"></a>pp <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(gender) <span class="sc">%&gt;%</span> <span class="fu">summarize</span>(<span class="at">count=</span><span class="fu">n</span>())</span></code></pre></div>
<pre><code>## # A tibble: 2 x 2
##   gender count
## * &lt;chr&gt;  &lt;int&gt;
## 1 Female     4
## 2 Male      16</code></pre>
<div class="sourceCode" id="cb437"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb437-1"><a href="data-frames.html#cb437-1" aria-hidden="true" tabindex="-1"></a><span class="co"># - Show the average age per gender</span></span>
<span id="cb437-2"><a href="data-frames.html#cb437-2" aria-hidden="true" tabindex="-1"></a>pp <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(gender) <span class="sc">%&gt;%</span> <span class="fu">summarize</span>(<span class="at">age=</span><span class="fu">mean</span>(age))</span></code></pre></div>
<pre><code>## # A tibble: 2 x 2
##   gender   age
## * &lt;chr&gt;  &lt;dbl&gt;
## 1 Female  25.3
## 2 Male    24.9</code></pre>
<div class="sourceCode" id="cb439"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb439-1"><a href="data-frames.html#cb439-1" aria-hidden="true" tabindex="-1"></a><span class="co"># - Show the average size per gender and institution</span></span>
<span id="cb439-2"><a href="data-frames.html#cb439-2" aria-hidden="true" tabindex="-1"></a>pp <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(gender, institution) <span class="sc">%&gt;%</span> <span class="fu">summarize</span>(<span class="at">size=</span><span class="fu">mean</span>(size))</span></code></pre></div>
<pre><code>## # A tibble: 4 x 3
## # Groups:   gender [2]
##   gender institution  size
##   &lt;chr&gt;  &lt;chr&gt;       &lt;dbl&gt;
## 1 Female ECL          178.
## 2 Male   ECL          168.
## 3 Male   INSA         174.
## 4 Male   UCBL         174.</code></pre>
<div class="sourceCode" id="cb441"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb441-1"><a href="data-frames.html#cb441-1" aria-hidden="true" tabindex="-1"></a><span class="co"># - Show the number of people from each country, </span></span>
<span id="cb441-2"><a href="data-frames.html#cb441-2" aria-hidden="true" tabindex="-1"></a><span class="co">#   sorted by descending population</span></span>
<span id="cb441-3"><a href="data-frames.html#cb441-3" aria-hidden="true" tabindex="-1"></a>pp <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(origin) <span class="sc">%&gt;%</span> </span>
<span id="cb441-4"><a href="data-frames.html#cb441-4" aria-hidden="true" tabindex="-1"></a>        <span class="fu">summarize</span>(<span class="at">count=</span><span class="fu">n</span>()) <span class="sc">%&gt;%</span> </span>
<span id="cb441-5"><a href="data-frames.html#cb441-5" aria-hidden="true" tabindex="-1"></a>        <span class="fu">arrange</span>(<span class="fu">desc</span>(count))</span></code></pre></div>
<pre><code>## # A tibble: 13 x 2
##    origin      count
##    &lt;chr&gt;       &lt;int&gt;
##  1 China           4
##  2 Ukraine         4
##  3 USA             2
##  4 Afghanistan     1
##  5 Austria         1
##  6 Brazil          1
##  7 Colombia        1
##  8 Cyprus          1
##  9 India           1
## 10 Iran            1
## 11 Sri Lanka       1
## 12 Tunisia         1
## 13 Yemen           1</code></pre>
<div class="sourceCode" id="cb443"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb443-1"><a href="data-frames.html#cb443-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Using `select()`, display:</span></span>
<span id="cb443-2"><a href="data-frames.html#cb443-2" aria-hidden="true" tabindex="-1"></a><span class="co"># - only the name and age columns</span></span>
<span id="cb443-3"><a href="data-frames.html#cb443-3" aria-hidden="true" tabindex="-1"></a>pp <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="fu">c</span>(name, age))</span></code></pre></div>
<pre><code>## # A tibble: 20 x 2
##    name                      age
##    &lt;chr&gt;                   &lt;dbl&gt;
##  1 Salem                    23.2
##  2 Dilruwan-Shanaka-Perera  23.9
##  3 Hanna                    23.2
##  4 Sabin                    25.6
##  5 Benedikt                 25.9
##  6 Jordyn                   24.0
##  7 Jennifer                 25.8
##  8 Yiran                    26.1
##  9 Leran                    28.2
## 10 Aymen                    31.0
## 11 Pavlo                    23.9
## 12 Saulo                    26.5
## 13 Nicolas-Estevan          27.3
## 14 Farzad                   24.2
## 15 Roein                    21.7
## 16 Paraskevas               21.7
## 17 Ihor                     21.4
## 18 Iryna                    28.0
## 19 Peng                     24.2
## 20 Mingyuan                 23.5</code></pre>
<div class="sourceCode" id="cb445"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb445-1"><a href="data-frames.html#cb445-1" aria-hidden="true" tabindex="-1"></a><span class="co"># - all but the name column</span></span>
<span id="cb445-2"><a href="data-frames.html#cb445-2" aria-hidden="true" tabindex="-1"></a>pp <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">-</span>name)</span></code></pre></div>
<pre><code>## # A tibble: 20 x 6
##    gender origin      institution dateofbirth  size   age
##    &lt;chr&gt;  &lt;chr&gt;       &lt;chr&gt;       &lt;date&gt;      &lt;dbl&gt; &lt;dbl&gt;
##  1 Male   Yemen       UCBL        1997-12-26   161.  23.2
##  2 Male   Sri Lanka   INSA        1997-03-28   172.  23.9
##  3 Female Ukraine     ECL         1997-12-30   165.  23.2
##  4 Male   India       INSA        1995-08-04   186.  25.6
##  5 Male   Austria     UCBL        1995-04-25   176.  25.9
##  6 Female USA         ECL         1997-02-19   176.  24.0
##  7 Female USA         ECL         1995-05-28   179   25.8
##  8 Male   China       UCBL        1995-02-04   188.  26.1
##  9 Male   China       UCBL        1992-12-30   186   28.2
## 10 Male   Tunisia     INSA        1990-03-03   160.  31.0
## 11 Male   Ukraine     ECL         1997-04-12   151.  23.9
## 12 Male   Brazil      ECL         1994-09-24   184.  26.5
## 13 Male   Colombia    INSA        1993-11-25   184.  27.3
## 14 Male   Iran        INSA        1996-12-27   183   24.2
## 15 Male   Afghanistan INSA        1999-07-11   155.  21.7
## 16 Male   Cyprus      INSA        1999-06-25   176.  21.7
## 17 Male   Ukraine     ECL         1999-10-03   170.  21.4
## 18 Female Ukraine     ECL         1993-02-27   192   28.0
## 19 Male   China       UCBL        1996-12-14   171   24.2
## 20 Male   China       UCBL        1997-08-21   164.  23.5</code></pre>
<div class="sourceCode" id="cb447"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb447-1"><a href="data-frames.html#cb447-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Using `filter()`, show data only for</span></span>
<span id="cb447-2"><a href="data-frames.html#cb447-2" aria-hidden="true" tabindex="-1"></a><span class="co"># - Chinese people</span></span>
<span id="cb447-3"><a href="data-frames.html#cb447-3" aria-hidden="true" tabindex="-1"></a>pp <span class="sc">%&gt;%</span> <span class="fu">filter</span>(origin<span class="sc">==</span><span class="st">&#39;China&#39;</span>)</span></code></pre></div>
<pre><code>## # A tibble: 4 x 7
##   name     gender origin institution dateofbirth  size   age
##   &lt;chr&gt;    &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt;       &lt;date&gt;      &lt;dbl&gt; &lt;dbl&gt;
## 1 Yiran    Male   China  UCBL        1995-02-04   188.  26.1
## 2 Leran    Male   China  UCBL        1992-12-30   186   28.2
## 3 Peng     Male   China  UCBL        1996-12-14   171   24.2
## 4 Mingyuan Male   China  UCBL        1997-08-21   164.  23.5</code></pre>
<div class="sourceCode" id="cb449"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb449-1"><a href="data-frames.html#cb449-1" aria-hidden="true" tabindex="-1"></a><span class="co"># - From institution ECL and UCBL</span></span>
<span id="cb449-2"><a href="data-frames.html#cb449-2" aria-hidden="true" tabindex="-1"></a>pp <span class="sc">%&gt;%</span> <span class="fu">filter</span>(institution <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&#39;ECL&#39;</span>, <span class="st">&#39;UCBL&#39;</span>))</span></code></pre></div>
<pre><code>## # A tibble: 13 x 7
##    name     gender origin  institution dateofbirth  size   age
##    &lt;chr&gt;    &lt;chr&gt;  &lt;chr&gt;   &lt;chr&gt;       &lt;date&gt;      &lt;dbl&gt; &lt;dbl&gt;
##  1 Salem    Male   Yemen   UCBL        1997-12-26   161.  23.2
##  2 Hanna    Female Ukraine ECL         1997-12-30   165.  23.2
##  3 Benedikt Male   Austria UCBL        1995-04-25   176.  25.9
##  4 Jordyn   Female USA     ECL         1997-02-19   176.  24.0
##  5 Jennifer Female USA     ECL         1995-05-28   179   25.8
##  6 Yiran    Male   China   UCBL        1995-02-04   188.  26.1
##  7 Leran    Male   China   UCBL        1992-12-30   186   28.2
##  8 Pavlo    Male   Ukraine ECL         1997-04-12   151.  23.9
##  9 Saulo    Male   Brazil  ECL         1994-09-24   184.  26.5
## 10 Ihor     Male   Ukraine ECL         1999-10-03   170.  21.4
## 11 Iryna    Female Ukraine ECL         1993-02-27   192   28.0
## 12 Peng     Male   China   UCBL        1996-12-14   171   24.2
## 13 Mingyuan Male   China   UCBL        1997-08-21   164.  23.5</code></pre>
<div class="sourceCode" id="cb451"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb451-1"><a href="data-frames.html#cb451-1" aria-hidden="true" tabindex="-1"></a><span class="co"># - People older than 22 </span></span>
<span id="cb451-2"><a href="data-frames.html#cb451-2" aria-hidden="true" tabindex="-1"></a>pp <span class="sc">%&gt;%</span> <span class="fu">filter</span>(age<span class="sc">&gt;</span><span class="dv">22</span>)</span></code></pre></div>
<pre><code>## # A tibble: 17 x 7
##    name                    gender origin    institution dateofbirth  size   age
##    &lt;chr&gt;                   &lt;chr&gt;  &lt;chr&gt;     &lt;chr&gt;       &lt;date&gt;      &lt;dbl&gt; &lt;dbl&gt;
##  1 Salem                   Male   Yemen     UCBL        1997-12-26   161.  23.2
##  2 Dilruwan-Shanaka-Perera Male   Sri Lanka INSA        1997-03-28   172.  23.9
##  3 Hanna                   Female Ukraine   ECL         1997-12-30   165.  23.2
##  4 Sabin                   Male   India     INSA        1995-08-04   186.  25.6
##  5 Benedikt                Male   Austria   UCBL        1995-04-25   176.  25.9
##  6 Jordyn                  Female USA       ECL         1997-02-19   176.  24.0
##  7 Jennifer                Female USA       ECL         1995-05-28   179   25.8
##  8 Yiran                   Male   China     UCBL        1995-02-04   188.  26.1
##  9 Leran                   Male   China     UCBL        1992-12-30   186   28.2
## 10 Aymen                   Male   Tunisia   INSA        1990-03-03   160.  31.0
## 11 Pavlo                   Male   Ukraine   ECL         1997-04-12   151.  23.9
## 12 Saulo                   Male   Brazil    ECL         1994-09-24   184.  26.5
## 13 Nicolas-Estevan         Male   Colombia  INSA        1993-11-25   184.  27.3
## 14 Farzad                  Male   Iran      INSA        1996-12-27   183   24.2
## 15 Iryna                   Female Ukraine   ECL         1993-02-27   192   28.0
## 16 Peng                    Male   China     UCBL        1996-12-14   171   24.2
## 17 Mingyuan                Male   China     UCBL        1997-08-21   164.  23.5</code></pre>
<div class="sourceCode" id="cb453"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb453-1"><a href="data-frames.html#cb453-1" aria-hidden="true" tabindex="-1"></a><span class="co"># - People with a `e` in their name</span></span>
<span id="cb453-2"><a href="data-frames.html#cb453-2" aria-hidden="true" tabindex="-1"></a>pp <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="fu">grepl</span>(<span class="st">&#39;e&#39;</span>,name))</span></code></pre></div>
<pre><code>## # A tibble: 10 x 7
##    name                    gender origin     institution dateofbirth  size   age
##    &lt;chr&gt;                   &lt;chr&gt;  &lt;chr&gt;      &lt;chr&gt;       &lt;date&gt;      &lt;dbl&gt; &lt;dbl&gt;
##  1 Salem                   Male   Yemen      UCBL        1997-12-26   161.  23.2
##  2 Dilruwan-Shanaka-Perera Male   Sri Lanka  INSA        1997-03-28   172.  23.9
##  3 Benedikt                Male   Austria    UCBL        1995-04-25   176.  25.9
##  4 Jennifer                Female USA        ECL         1995-05-28   179   25.8
##  5 Leran                   Male   China      UCBL        1992-12-30   186   28.2
##  6 Aymen                   Male   Tunisia    INSA        1990-03-03   160.  31.0
##  7 Nicolas-Estevan         Male   Colombia   INSA        1993-11-25   184.  27.3
##  8 Roein                   Male   Afghanist… INSA        1999-07-11   155.  21.7
##  9 Paraskevas              Male   Cyprus     INSA        1999-06-25   176.  21.7
## 10 Peng                    Male   China      UCBL        1996-12-14   171   24.2</code></pre>
</details>
</details>
<p>For more interesting exercises in the tidyverse, look at:</p>
<ul>
<li><a href="Exo/Rexercises-co2.html">CO2 emissions: data wrangling and ggplot2</a></li>
<li><a href="Exo/Rexercises-religion_babies.html">Religion and babies: data handling, ggplot2 and plotly</a></li>
<li><a href="Exo/Rexercises-covid.html">COVID-19: data wrangling, ggplot2</a></li>
</ul>
<p><br>
<br>
<br>
<br>
<br></p>
<p><br>
<br>
<br>
<br>
<br></p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="vectors.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="lists.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": null,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": null,
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": null,
"scroll_highlight": true
},
"toolbar": {
"position": "fixed"
},
"search": true
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
