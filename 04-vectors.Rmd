# Vectors

**R is a vectorized language** with built-in arithmetic and relational operators, mathematical functions and types of number. It means that each mathematical function and operator works on a set of data rather than a single scalar value as traditional computer language do, and thus __formal looping can _usually_ be avoided__.

## Different ways of defining a vector


```{r, warnings=FALSE}
x <- c(1,5,3,12,4.2); x # x is a vector of doubles
x <- c(1,5,3,12,"skdjnc"); x # x is converted to a vector of strings
1:10
1:10*.1  # no need to loop on the elements to multiply them!
1:10 + 1:10*.5 # or to add/subtract/multiply vectors
1:10*1:10
seq(-10,10,by=.5)
seq(-10,10,length=6)
seq(-10,10,along=x)
rep(0,10)
rep(c(0,2), 5)
rep(c(0,2),each=5)
# vector with 10 random values normally distributed around mean
rnorm(10, mean=3, sd=1)
# vector with 10 random values uniformly distributed
runif(10, min = 0, max = 1)
```

## Principal operations on vectors


```{r, warnings=FALSE}
x <- c(1,5,3,12,3,4.2)
y <- c(a=0,b=2,c=1,d=9,e=10,f=-1) # each element can be named
x; y
names(x);names(y)
```
### Accessing values
__!!! In R, indexes numbering start at 1 !!!__
```{r, warnings=FALSE}
# accessing by indexes
x[1]; y[4]; 
# accessing by name
y[c('b','d')]; y[['c']]
# access index 1, 5 and 2
x[c(1,5,2)] 
# remove elements 1 and 3
x[-c(1,3)] 
```
### Sorting
```{r, warnings=FALSE}
# ascending
sort(x) 
# descending
sort(x, decreasing = TRUE) 
# find the order of the indexes of the sorting
order(x); x[order(x)]
# find duplicates
duplicated(x)
# remove duplicates
unique(x)
# choose 3 random values
sample(x, 3)
```
### Maximum and minimum
```{r, warnings=FALSE}
# maximum of x and its index
x; max(x); which.max(x) 
# minimum of y and its index
y; min(y); which.min(y)
# range of a vector
range(x)
```
### Mathematical operations
```{r, warnings=FALSE, error=TRUE}
x + 2             # addition of a value to all elements
x*2               # multiplication / division
x%/%3             # integer division
sqrt(abs(cos(x))) # math functions apply on all elements
x^2.5             # power
x*y               # multiplication of vectors of the same size
x*1:2             # multiplication of vectors of different sizes
x%%2              # modulo
x %o% y           # outer product of vectors (the result is a matrix)
```
### Statistics on vectors
```{r, warnings=FALSE}
length(x)  # size of vector
summary(x) # statistics on vector
sum(x)     # sum of all terms
mean(x)    # average value
median(x)  # median value
sd(x)      # standard deviation
table(x)   # count occurrence of values
```
### More stuff
```{r, warnings=FALSE}
# cumulative sum
cumsum(x)
# term-by-term difference
diff(x)
# reverse order
rev(1:5)
# append values
append(x, 4)    # at the end
append(x, 4, 3) # or after a given index
# concatenate vectors
z <- c(-1:4, NA, -x); z
# find NA values
is.na(z); anyNA(z)
# remove NA values (operator "!" means "is not")
z <- z[!is.na(z)]; z
# returns a vector of the indexes verifying the condition
z==2; which(z==2)
# positive values of z
z; z>0; z[z>0]; z[which(z>0)]
```


## Exercises {#exo-vactors}


<details>
<summary>**Exercise 1**</summary>

Consider two vectors, x, y:
```r
x <- 1:5
y <- seq(0, 4, along=x)
```

Without typing it into Rstudio, what are the values of `x`, `y`, and `x*y`?

</details>

<details>
<summary>**Exercise 2**</summary>

Consider two vectors, a, b

```r
a <- c(1,5,4,3,6)
b <- c(3,5,2,1,9)
```
What is the value of: `a<=b`?

</details>

<details>
<summary>**Exercise 3**</summary>

If 
```r
x <- c(1:12)
```
What is the value of: `length(x)`

</details>

<details>
<summary>**Exercise 4**</summary>

If 
```r
a <- c(12:5)
```
What is the value of: `is.numeric(a)`

</details>

<details>
<summary>**Exercise 5**</summary>

Consider two vectors, x, y
```r
x <- c(12:4)
y <- c(0,1,2,0,1,2,0,1,2)
```
What is the value of: `which(!is.finite(x/y))`?


</details>

<details>
<summary>**Exercise 6**</summary>

Consider two vectors, x, y
```r
x <- letters[1:10]
y <- letters[15:24]
```
What is the value of: `x<y`?

</details>

<details>
<summary>**Exercise 7**</summary>

If 
```r
x <- c('blue','red','green','yellow')
```
What is the value of: `is.character(x)`?

</details>

<details>
<summary>**Exercise 8**</summary>

If 
```r
x <- c('blue',10,'green',20)
```
What is the value of: `is.character(x)`?

</details>

<details>
<summary>**Exercise 9**</summary>

Assign value 5 to variable x.

Is there a difference between `1:x-1` and `1:(x-1)` ?

Explain.

</details>

<details>
<summary>**Exercise 10**</summary>

Generate the sequence `9, 18, 27, 36, 45, 54, 63, 72, 81, 90` in 4 different manners.

</details>

<details>
<summary>**Exercise 11**</summary>

If `x <- c("w", "h", "f", "g", "k")`, what will be the output for `x[c(2,3)]`?

1. "h", "f"
1. "h"
1. "f"

What will be the third value in the index vector operation `x[c(2, 4, 4)]`?

1. "h"
1. NA
1. "g"

What will be the fourth value in the index vector operation `x[-2]`?

1. "h"
1. "g"
1. "k"


</details>

<details>
<summary>**Exercise 11**</summary>

Let `a <- c(2, 4, 6, 8)` and `b <- c(TRUE, FALSE, TRUE, FALSE)`.

What will be the output for the R expression `max(a[b])`?


</details>


<details>
<summary>**Exercise 12: Case Application**</summary>

(adapted from [here](https://perso.esiee.fr/~courivad/R/05-vectors.html#application-population-in-french-cities-1962-2012))

Open Rstudio and create a new R script, save it as `population.R` in your wanted directory, say `Rcourse/`.


<a href="Data/population.csv" download target="_blank">Download</a> the `population.csv` file and save it in your working directory.

A csv file contains raw data stored as plain text and separated by a comma (Comma Separated Values). Open it from a text editor, as Excel and the likes don't work well with csv files.

We can of course directly load such file with R and store its data in an appropriate format (_i.e._ a `data.frame`), but this is for a next section. For now, just copy-paste the text in the Rstudio script area to:

- Create a `cities` vector containing all the cities listed in `population.csv`
- Create a `pop_1962` and `pop_2012` vectors containing the populations of each city at these years. Print the 2 vectors. 
- Use names() to name values of `pop_1962` and `pop_2012`. Print the 2 vectors again. Are there any change?
- What are the cities with more than 200000 people in 1962? For these, how many residents in 2012?
- What is the population evolution of Montpellier and Nantes?
- Create a `pop_diff` vector to store population change between 1962 and 2012
- Print cities with a negative change
- Print cities which broke the 300000 people barrier between 1962 and 2012
- Compute the total change in population of the 10 largest cities (as of 1962) between 1962 and 2012.
- Compute the population mean for year 1962
- Compute the population mean of Paris
- Sort the cities by decreasing order of population for both years
- Check to see which cities changed rank during these years (check out the `match` function).

<details>
<summary>Solution</summary>

```{r, warnings=FALSE}
# Create a `cities` vector containing all the cities listed in `population.csv`
cities <- c("Angers", "Bordeaux", "Brest", "Dijon", "Grenoble", "Le Havre", 
            "Le Mans", "Lille", "Lyon", "Marseille", "Montpellier", "Nantes", 
            "Nice", "Paris", "Reims", "Rennes", "Saint-Ã‰tienne", "Strasbourg", 
            "Toulon", "Toulouse")
# Create a `pop_1962` and `pop_2012` vectors containing the populations 
# of each city at these years. Print the 2 vectors. 
pop_1962 <- c(115273,278403,136104,135694,156707,187845,132181,239955,
              535746,778071,118864,240048,292958,2790091,134856,151948,
              210311,228971,161797,323724)
pop_2012 <- c(149017,241287,139676,152071,158346,173142,143599,228652,
              496343,852516,268456,291604,343629,2240621,181893,209860,
              171483,274394,164899,453317)
pop_1962; pop_2012
# Use names() to name values of `pop_1962` and `pop_2012`. 
# Print the 2 vectors again. Are there any change?
names(pop_2012) <- names(pop_1962) <- cities
pop_1962; pop_2012
# What are the cities with more than 200000 people in 1962? 
# For these, how many residents in 2012?
cities200k <- cities[pop_1962>200000]
cities200k; pop_2012[cities200k]
# What is the population evolution of Montpellier and Nantes?
pop_2012['Montpellier'] - pop_1962['Montpellier']; pop_2012['Nantes'] - pop_1962['Nantes']
# Create a `pop_diff` vector to store population change between 1962 and 2012
pop_diff <- pop_2012 - pop_1962
# Print cities with a negative change
cities[pop_diff<0]
# Print cities which broke the 300000 people barrier between 1962 and 2012
cities[pop_2012>300000 & pop_1962<300000]
# Compute the total change in population of the 10 largest cities
# (as of 1962) between 1962 and 2012.
ten_largest <- cities[order(pop_1962, decreasing = TRUE)[1:10]]
sum(pop_2012[ten_largest] - pop_1962[ten_largest])
# Compute the population mean for year 1962
mean(pop_1962)
# Compute the population mean of Paris
mean(c(pop_1962['Paris'], pop_2012['Paris']))
# Sort the cities by decreasing order of population for both years
(pop_1962_sorted <- sort(pop_1962, decreasing = TRUE))
(pop_2012_sorted <- sort(pop_2012, decreasing = TRUE))
# Check to see which cities changed rank (and by how much) 
# during these years (check out the `match` function).
ranked_cities <- match(names(pop_1962_sorted),names(pop_2012_sorted)) - seq_along(cities)
names(ranked_cities) <- names(pop_1962_sorted)
ranked_cities
```


</details>
</details>


<br>
<br>
<br>
<br>
<br>


