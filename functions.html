<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>8 Functions | Reproducible data treatment with R</title>
  <meta name="description" content="8 Functions | Reproducible data treatment with R" />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="8 Functions | Reproducible data treatment with R" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://lmi.cnrs.fr/r/" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="8 Functions | Reproducible data treatment with R" />
  
  
  

<meta name="author" content="Colin Bousige" />


<meta name="date" content="2021-09-03" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="lists.html"/>
<link rel="next" href="conditional-actions-and-loops.html"/>
<script src="libs/header-attrs-2.7/header-attrs.js"></script>
<script src="libs/jquery-3.5.1/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/htmlwidgets-1.5.3/htmlwidgets.js"></script>
<script src="libs/plotly-binding-4.9.3/plotly.js"></script>
<script src="libs/typedarray-0.1/typedarray.min.js"></script>
<link href="libs/crosstalk-1.1.1/css/crosstalk.css" rel="stylesheet" />
<script src="libs/crosstalk-1.1.1/js/crosstalk.min.js"></script>
<link href="libs/plotly-htmlwidgets-css-1.57.1/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotly-main-1.57.1/plotly-latest.min.js"></script>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-152051691-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-152051691-1');
</script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="https://lmi.cnrs.fr/r/index.html">Reproducible data treatment with R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> About the class</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#objectives-of-the-class"><i class="fa fa-check"></i><b>1.1</b> Objectives of the class</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#prerequisites"><i class="fa fa-check"></i><b>1.2</b> Prerequisites</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#teaser"><i class="fa fa-check"></i><b>1.3</b> Teaser</a></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#motivations"><i class="fa fa-check"></i><b>1.4</b> Motivations</a>
<ul>
<li class="chapter" data-level="1.4.1" data-path="index.html"><a href="index.html#reproducible-data-treatment-why-it-matters"><i class="fa fa-check"></i><b>1.4.1</b> Reproducible data treatment: why it matters</a></li>
<li class="chapter" data-level="1.4.2" data-path="index.html"><a href="index.html#why-with-r-and-not-python"><i class="fa fa-check"></i><b>1.4.2</b> Why with R and not python?</a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="index.html"><a href="index.html#further-reading"><i class="fa fa-check"></i><b>1.5</b> Further reading</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="getting-ready.html"><a href="getting-ready.html"><i class="fa fa-check"></i><b>2</b> Getting ready</a>
<ul>
<li class="chapter" data-level="2.1" data-path="getting-ready.html"><a href="getting-ready.html#the-easy-way"><i class="fa fa-check"></i><b>2.1</b> The easy way</a></li>
<li class="chapter" data-level="2.2" data-path="getting-ready.html"><a href="getting-ready.html#the-more-advanced-way"><i class="fa fa-check"></i><b>2.2</b> The more advanced way</a></li>
<li class="chapter" data-level="2.3" data-path="getting-ready.html"><a href="getting-ready.html#in-any-case-install-latex"><i class="fa fa-check"></i><b>2.3</b> In any case: install LaTeX</a></li>
<li class="chapter" data-level="2.4" data-path="getting-ready.html"><a href="getting-ready.html#setting-up-the-environment"><i class="fa fa-check"></i><b>2.4</b> Setting up the environment</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="teaser-practical-case.html"><a href="teaser-practical-case.html"><i class="fa fa-check"></i><b>3</b> Teaser: practical case</a>
<ul>
<li class="chapter" data-level="3.1" data-path="teaser-practical-case.html"><a href="teaser-practical-case.html#reading-and-fitting-all-your-experimental-files-in-one-go"><i class="fa fa-check"></i><b>3.1</b> Reading and fitting all your experimental files in one go</a></li>
<li class="chapter" data-level="3.2" data-path="teaser-practical-case.html"><a href="teaser-practical-case.html#various-ways-of-plotting-it"><i class="fa fa-check"></i><b>3.2</b> Various ways of plotting it</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="simple-variables.html"><a href="simple-variables.html"><i class="fa fa-check"></i><b>4</b> Simple variables</a>
<ul>
<li class="chapter" data-level="4.1" data-path="simple-variables.html"><a href="simple-variables.html#scalars-and-booleans"><i class="fa fa-check"></i><b>4.1</b> Scalars and booleans</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="simple-variables.html"><a href="simple-variables.html#booleans"><i class="fa fa-check"></i><b>4.1.1</b> Booleans</a></li>
<li class="chapter" data-level="4.1.2" data-path="simple-variables.html"><a href="simple-variables.html#special-values"><i class="fa fa-check"></i><b>4.1.2</b> Special values</a></li>
<li class="chapter" data-level="4.1.3" data-path="simple-variables.html"><a href="simple-variables.html#complex-values"><i class="fa fa-check"></i><b>4.1.3</b> Complex values</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="simple-variables.html"><a href="simple-variables.html#strings"><i class="fa fa-check"></i><b>4.2</b> Strings</a></li>
<li class="chapter" data-level="4.3" data-path="simple-variables.html"><a href="simple-variables.html#exo-variables"><i class="fa fa-check"></i><b>4.3</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="vectors.html"><a href="vectors.html"><i class="fa fa-check"></i><b>5</b> Vectors</a>
<ul>
<li class="chapter" data-level="5.1" data-path="vectors.html"><a href="vectors.html#different-ways-of-defining-a-vector"><i class="fa fa-check"></i><b>5.1</b> Different ways of defining a vector</a></li>
<li class="chapter" data-level="5.2" data-path="vectors.html"><a href="vectors.html#principal-operations-on-vectors"><i class="fa fa-check"></i><b>5.2</b> Principal operations on vectors</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="vectors.html"><a href="vectors.html#accessing-values"><i class="fa fa-check"></i><b>5.2.1</b> Accessing values</a></li>
<li class="chapter" data-level="5.2.2" data-path="vectors.html"><a href="vectors.html#sorting"><i class="fa fa-check"></i><b>5.2.2</b> Sorting</a></li>
<li class="chapter" data-level="5.2.3" data-path="vectors.html"><a href="vectors.html#maximum-and-minimum"><i class="fa fa-check"></i><b>5.2.3</b> Maximum and minimum</a></li>
<li class="chapter" data-level="5.2.4" data-path="vectors.html"><a href="vectors.html#mathematical-operations"><i class="fa fa-check"></i><b>5.2.4</b> Mathematical operations</a></li>
<li class="chapter" data-level="5.2.5" data-path="vectors.html"><a href="vectors.html#statistics-on-vectors"><i class="fa fa-check"></i><b>5.2.5</b> Statistics on vectors</a></li>
<li class="chapter" data-level="5.2.6" data-path="vectors.html"><a href="vectors.html#more-stuff"><i class="fa fa-check"></i><b>5.2.6</b> More stuff</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="vectors.html"><a href="vectors.html#exo-vactors"><i class="fa fa-check"></i><b>5.3</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="data-frames.html"><a href="data-frames.html"><i class="fa fa-check"></i><b>6</b> Data frames</a>
<ul>
<li class="chapter" data-level="6.1" data-path="data-frames.html"><a href="data-frames.html#defining-a-data.frame"><i class="fa fa-check"></i><b>6.1</b> Defining a data.frame</a></li>
<li class="chapter" data-level="6.2" data-path="data-frames.html"><a href="data-frames.html#accessing-values-1"><i class="fa fa-check"></i><b>6.2</b> Accessing values</a></li>
<li class="chapter" data-level="6.3" data-path="data-frames.html"><a href="data-frames.html#adding-columns-or-rows"><i class="fa fa-check"></i><b>6.3</b> Adding columns or rows</a></li>
<li class="chapter" data-level="6.4" data-path="data-frames.html"><a href="data-frames.html#tidy-up"><i class="fa fa-check"></i><b>6.4</b> Tidy up!</a>
<ul>
<li class="chapter" data-level="6.4.1" data-path="data-frames.html"><a href="data-frames.html#what-is-tidy-data"><i class="fa fa-check"></i><b>6.4.1</b> What is tidy data?</a></li>
<li class="chapter" data-level="6.4.2" data-path="data-frames.html"><a href="data-frames.html#tibbles"><i class="fa fa-check"></i><b>6.4.2</b> Tibbles</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="data-frames.html"><a href="data-frames.html#operations-in-the-tidyverse"><i class="fa fa-check"></i><b>6.5</b> Operations in the tidyverse</a></li>
<li class="chapter" data-level="6.6" data-path="data-frames.html"><a href="data-frames.html#exo-df"><i class="fa fa-check"></i><b>6.6</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="lists.html"><a href="lists.html"><i class="fa fa-check"></i><b>7</b> Lists</a>
<ul>
<li class="chapter" data-level="7.1" data-path="lists.html"><a href="lists.html#definition"><i class="fa fa-check"></i><b>7.1</b> Definition</a></li>
<li class="chapter" data-level="7.2" data-path="lists.html"><a href="lists.html#accessing-values-and-other-operations"><i class="fa fa-check"></i><b>7.2</b> Accessing values and other operations</a></li>
<li class="chapter" data-level="7.3" data-path="lists.html"><a href="lists.html#exo-lists"><i class="fa fa-check"></i><b>7.3</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="functions.html"><a href="functions.html"><i class="fa fa-check"></i><b>8</b> Functions</a>
<ul>
<li class="chapter" data-level="8.1" data-path="functions.html"><a href="functions.html#definition-1"><i class="fa fa-check"></i><b>8.1</b> Definition</a></li>
<li class="chapter" data-level="8.2" data-path="functions.html"><a href="functions.html#interpolation-of-data"><i class="fa fa-check"></i><b>8.2</b> Interpolation of data</a></li>
<li class="chapter" data-level="8.3" data-path="functions.html"><a href="functions.html#exo-functions"><i class="fa fa-check"></i><b>8.3</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="conditional-actions-and-loops.html"><a href="conditional-actions-and-loops.html"><i class="fa fa-check"></i><b>9</b> Conditional actions and loops</a>
<ul>
<li class="chapter" data-level="9.1" data-path="conditional-actions-and-loops.html"><a href="conditional-actions-and-loops.html#conditional-actions"><i class="fa fa-check"></i><b>9.1</b> Conditional actions</a></li>
<li class="chapter" data-level="9.2" data-path="conditional-actions-and-loops.html"><a href="conditional-actions-and-loops.html#loops"><i class="fa fa-check"></i><b>9.2</b> Loops…</a></li>
<li class="chapter" data-level="9.3" data-path="conditional-actions-and-loops.html"><a href="conditional-actions-and-loops.html#and-how-to-avoid-them"><i class="fa fa-check"></i><b>9.3</b> … and how to avoid them</a></li>
<li class="chapter" data-level="9.4" data-path="conditional-actions-and-loops.html"><a href="conditional-actions-and-loops.html#exo-loops"><i class="fa fa-check"></i><b>9.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="plotting.html"><a href="plotting.html"><i class="fa fa-check"></i><b>10</b> Plotting</a>
<ul>
<li class="chapter" data-level="10.1" data-path="plotting.html"><a href="plotting.html#base-graphics"><i class="fa fa-check"></i><b>10.1</b> Base graphics</a>
<ul>
<li class="chapter" data-level="10.1.1" data-path="plotting.html"><a href="plotting.html#basic-plotting"><i class="fa fa-check"></i><b>10.1.1</b> Basic plotting</a></li>
<li class="chapter" data-level="10.1.2" data-path="plotting.html"><a href="plotting.html#adding-some-style"><i class="fa fa-check"></i><b>10.1.2</b> Adding some style</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="plotting.html"><a href="plotting.html#advanced-plotting-using-ggplot2"><i class="fa fa-check"></i><b>10.2</b> Advanced plotting using ggplot2</a>
<ul>
<li class="chapter" data-level="10.2.1" data-path="plotting.html"><a href="plotting.html#the-grammar-of-graphics"><i class="fa fa-check"></i><b>10.2.1</b> The grammar of graphics</a></li>
<li class="chapter" data-level="10.2.2" data-path="plotting.html"><a href="plotting.html#theming"><i class="fa fa-check"></i><b>10.2.2</b> Theming</a></li>
<li class="chapter" data-level="10.2.3" data-path="plotting.html"><a href="plotting.html#making-interactive-plots-with-ggplot2-and-plotly"><i class="fa fa-check"></i><b>10.2.3</b> Making interactive plots with ggplot2 and plotly</a></li>
<li class="chapter" data-level="10.2.4" data-path="plotting.html"><a href="plotting.html#gathering-plots-on-a-grid"><i class="fa fa-check"></i><b>10.2.4</b> Gathering plots on a grid</a></li>
<li class="chapter" data-level="10.2.5" data-path="plotting.html"><a href="plotting.html#plots-with-insets"><i class="fa fa-check"></i><b>10.2.5</b> Plots with insets</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="plotting.html"><a href="plotting.html#exo-plots"><i class="fa fa-check"></i><b>10.3</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="colorplots.html"><a href="colorplots.html"><i class="fa fa-check"></i><b>11</b> 3D color plots</a>
<ul>
<li class="chapter" data-level="11.1" data-path="colorplots.html"><a href="colorplots.html#the-ggplot2-solution"><i class="fa fa-check"></i><b>11.1</b> The ggplot2 solution</a></li>
<li class="chapter" data-level="11.2" data-path="colorplots.html"><a href="colorplots.html#the-base-graphics-solution"><i class="fa fa-check"></i><b>11.2</b> The base graphics solution</a></li>
<li class="chapter" data-level="11.3" data-path="colorplots.html"><a href="colorplots.html#the-plotly-solution"><i class="fa fa-check"></i><b>11.3</b> The plotly solution</a></li>
<li class="chapter" data-level="11.4" data-path="colorplots.html"><a href="colorplots.html#the-case-of-non-regular-data"><i class="fa fa-check"></i><b>11.4</b> The case of non-regular data</a></li>
<li class="chapter" data-level="11.5" data-path="colorplots.html"><a href="colorplots.html#d-density-of-points"><i class="fa fa-check"></i><b>11.5</b> 2D density of points</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="fitting.html"><a href="fitting.html"><i class="fa fa-check"></i><b>12</b> Fitting</a>
<ul>
<li class="chapter" data-level="12.1" data-path="fitting.html"><a href="fitting.html#linear-fitting-with-lm"><i class="fa fa-check"></i><b>12.1</b> Linear fitting with <code>lm()</code></a></li>
<li class="chapter" data-level="12.2" data-path="fitting.html"><a href="fitting.html#nonlinear-least-squares-fitting"><i class="fa fa-check"></i><b>12.2</b> Nonlinear Least Squares fitting</a>
<ul>
<li class="chapter" data-level="12.2.1" data-path="fitting.html"><a href="fitting.html#the-nls-workhorse"><i class="fa fa-check"></i><b>12.2.1</b> The <code>nls()</code> workhorse</a></li>
<li class="chapter" data-level="12.2.2" data-path="fitting.html"><a href="fitting.html#using-constraints"><i class="fa fa-check"></i><b>12.2.2</b> Using constraints</a></li>
<li class="chapter" data-level="12.2.3" data-path="fitting.html"><a href="fitting.html#a-more-robust-version-of-nls"><i class="fa fa-check"></i><b>12.2.3</b> A more robust version of <code>nls</code></a></li>
</ul></li>
<li class="chapter" data-level="12.3" data-path="fitting.html"><a href="fitting.html#the-broom-library"><i class="fa fa-check"></i><b>12.3</b> The broom library</a></li>
<li class="chapter" data-level="12.4" data-path="fitting.html"><a href="fitting.html#exo-fits"><i class="fa fa-check"></i><b>12.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="practical-case-recursive-data-treatment.html"><a href="practical-case-recursive-data-treatment.html"><i class="fa fa-check"></i><b>13</b> Practical case: recursive data treatment</a>
<ul>
<li class="chapter" data-level="13.1" data-path="practical-case-recursive-data-treatment.html"><a href="practical-case-recursive-data-treatment.html#example-practical"><i class="fa fa-check"></i><b>13.1</b> Example</a></li>
<li class="chapter" data-level="13.2" data-path="practical-case-recursive-data-treatment.html"><a href="practical-case-recursive-data-treatment.html#exercise"><i class="fa fa-check"></i><b>13.2</b> Exercise</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="writing-documents-with-rmarkdown.html"><a href="writing-documents-with-rmarkdown.html"><i class="fa fa-check"></i><b>14</b> Writing documents with Rmarkdown</a>
<ul>
<li class="chapter" data-level="14.1" data-path="writing-documents-with-rmarkdown.html"><a href="writing-documents-with-rmarkdown.html#what-is-markdown"><i class="fa fa-check"></i><b>14.1</b> What is markdown?</a></li>
<li class="chapter" data-level="14.2" data-path="writing-documents-with-rmarkdown.html"><a href="writing-documents-with-rmarkdown.html#and-rmarkdown"><i class="fa fa-check"></i><b>14.2</b> … and Rmarkdown?</a></li>
<li class="chapter" data-level="14.3" data-path="writing-documents-with-rmarkdown.html"><a href="writing-documents-with-rmarkdown.html#further-reading-1"><i class="fa fa-check"></i><b>14.3</b> Further reading</a></li>
<li class="chapter" data-level="14.4" data-path="writing-documents-with-rmarkdown.html"><a href="writing-documents-with-rmarkdown.html#example-Rmd"><i class="fa fa-check"></i><b>14.4</b> Example</a></li>
<li class="chapter" data-level="14.5" data-path="writing-documents-with-rmarkdown.html"><a href="writing-documents-with-rmarkdown.html#code-chunks-options"><i class="fa fa-check"></i><b>14.5</b> Code chunks options</a></li>
<li class="chapter" data-level="14.6" data-path="writing-documents-with-rmarkdown.html"><a href="writing-documents-with-rmarkdown.html#compilation"><i class="fa fa-check"></i><b>14.6</b> Compilation</a></li>
<li class="chapter" data-level="14.7" data-path="writing-documents-with-rmarkdown.html"><a href="writing-documents-with-rmarkdown.html#going-further-parameters"><i class="fa fa-check"></i><b>14.7</b> Going further: parameters</a></li>
<li class="chapter" data-level="14.8" data-path="writing-documents-with-rmarkdown.html"><a href="writing-documents-with-rmarkdown.html#and-what-about-jupyter-notebooks"><i class="fa fa-check"></i><b>14.8</b> And what about JuPyteR notebooks?</a></li>
<li class="chapter" data-level="14.9" data-path="writing-documents-with-rmarkdown.html"><a href="writing-documents-with-rmarkdown.html#exo-rmd"><i class="fa fa-check"></i><b>14.9</b> Exercise</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="graphical-interfaces-with-shiny.html"><a href="graphical-interfaces-with-shiny.html"><i class="fa fa-check"></i><b>15</b> Graphical interfaces with Shiny</a>
<ul>
<li class="chapter" data-level="15.1" data-path="graphical-interfaces-with-shiny.html"><a href="graphical-interfaces-with-shiny.html#stand-alone-shiny-application"><i class="fa fa-check"></i><b>15.1</b> Stand-alone shiny application</a>
<ul>
<li class="chapter" data-level="15.1.1" data-path="graphical-interfaces-with-shiny.html"><a href="graphical-interfaces-with-shiny.html#the-layout"><i class="fa fa-check"></i><b>15.1.1</b> The layout</a></li>
<li class="chapter" data-level="15.1.2" data-path="graphical-interfaces-with-shiny.html"><a href="graphical-interfaces-with-shiny.html#the-server"><i class="fa fa-check"></i><b>15.1.2</b> The server</a></li>
<li class="chapter" data-level="15.1.3" data-path="graphical-interfaces-with-shiny.html"><a href="graphical-interfaces-with-shiny.html#various-useful-functions"><i class="fa fa-check"></i><b>15.1.3</b> Various useful functions</a></li>
<li class="chapter" data-level="15.1.4" data-path="graphical-interfaces-with-shiny.html"><a href="graphical-interfaces-with-shiny.html#example-shiny"><i class="fa fa-check"></i><b>15.1.4</b> Example</a></li>
</ul></li>
<li class="chapter" data-level="15.2" data-path="graphical-interfaces-with-shiny.html"><a href="graphical-interfaces-with-shiny.html#rmarkdown-embedded-shiny-application"><i class="fa fa-check"></i><b>15.2</b> Rmarkdown-embedded shiny application</a></li>
<li class="chapter" data-level="15.3" data-path="graphical-interfaces-with-shiny.html"><a href="graphical-interfaces-with-shiny.html#deploying-your-shiny-app"><i class="fa fa-check"></i><b>15.3</b> Deploying your shiny app</a>
<ul>
<li class="chapter" data-level="15.3.1" data-path="graphical-interfaces-with-shiny.html"><a href="graphical-interfaces-with-shiny.html#passing-the-app.r-file-to-your-users"><i class="fa fa-check"></i><b>15.3.1</b> Passing the app.R file to your users</a></li>
<li class="chapter" data-level="15.3.2" data-path="graphical-interfaces-with-shiny.html"><a href="graphical-interfaces-with-shiny.html#deploying-to-shinyapps.io"><i class="fa fa-check"></i><b>15.3.2</b> Deploying to shinyapps.io</a></li>
<li class="chapter" data-level="15.3.3" data-path="graphical-interfaces-with-shiny.html"><a href="graphical-interfaces-with-shiny.html#deploying-on-your-own-linux-server"><i class="fa fa-check"></i><b>15.3.3</b> Deploying on your own Linux server</a></li>
<li class="chapter" data-level="15.3.4" data-path="graphical-interfaces-with-shiny.html"><a href="graphical-interfaces-with-shiny.html#building-an-executable"><i class="fa fa-check"></i><b>15.3.4</b> Building an executable</a></li>
</ul></li>
<li class="chapter" data-level="15.4" data-path="graphical-interfaces-with-shiny.html"><a href="graphical-interfaces-with-shiny.html#further-reading-2"><i class="fa fa-check"></i><b>15.4</b> Further reading</a></li>
<li class="chapter" data-level="15.5" data-path="graphical-interfaces-with-shiny.html"><a href="graphical-interfaces-with-shiny.html#exo-shiny"><i class="fa fa-check"></i><b>15.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="working-with-units-and-experimental-errors.html"><a href="working-with-units-and-experimental-errors.html"><i class="fa fa-check"></i><b>16</b> Working with units and experimental errors</a>
<ul>
<li class="chapter" data-level="16.1" data-path="working-with-units-and-experimental-errors.html"><a href="working-with-units-and-experimental-errors.html#working-with-units"><i class="fa fa-check"></i><b>16.1</b> Working with units</a></li>
<li class="chapter" data-level="16.2" data-path="working-with-units-and-experimental-errors.html"><a href="working-with-units-and-experimental-errors.html#working-with-experimental-errors"><i class="fa fa-check"></i><b>16.2</b> Working with experimental errors</a></li>
</ul></li>
<li class="chapter" data-level="17" data-path="reading-all-kinds-of-files.html"><a href="reading-all-kinds-of-files.html"><i class="fa fa-check"></i><b>17</b> Reading all kinds of files</a>
<ul>
<li class="chapter" data-level="17.1" data-path="reading-all-kinds-of-files.html"><a href="reading-all-kinds-of-files.html#column-text-files"><i class="fa fa-check"></i><b>17.1</b> Column text files</a></li>
<li class="chapter" data-level="17.2" data-path="reading-all-kinds-of-files.html"><a href="reading-all-kinds-of-files.html#excel-files"><i class="fa fa-check"></i><b>17.2</b> Excel files</a></li>
<li class="chapter" data-level="17.3" data-path="reading-all-kinds-of-files.html"><a href="reading-all-kinds-of-files.html#origin-files"><i class="fa fa-check"></i><b>17.3</b> Origin files</a></li>
<li class="chapter" data-level="17.4" data-path="reading-all-kinds-of-files.html"><a href="reading-all-kinds-of-files.html#images"><i class="fa fa-check"></i><b>17.4</b> Images</a></li>
<li class="chapter" data-level="17.5" data-path="reading-all-kinds-of-files.html"><a href="reading-all-kinds-of-files.html#spectroscopic-files"><i class="fa fa-check"></i><b>17.5</b> Spectroscopic files</a></li>
<li class="chapter" data-level="17.6" data-path="reading-all-kinds-of-files.html"><a href="reading-all-kinds-of-files.html#compressed-binary-data-files-hdf-netcdf"><i class="fa fa-check"></i><b>17.6</b> Compressed binary data files: HDF, netCDF</a></li>
</ul></li>
<li class="chapter" data-level="18" data-path="list-of-exercises.html"><a href="list-of-exercises.html"><i class="fa fa-check"></i><b>18</b> List of exercises</a></li>
<li class="divider"></li>
<br><br><br><br>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Reproducible data treatment with R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="functions" class="section level1" number="8">
<h1><span class="header-section-number">8</span> Functions</h1>
<div id="definition-1" class="section level2" number="8.1">
<h2><span class="header-section-number">8.1</span> Definition</h2>
<p>To get the manual on a base function, type <code class="sourceCode r">?function_name</code>.</p>
<p>A function returns the last thing that is called in it:</p>
<div class="sourceCode" id="cb500"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb500-1"><a href="functions.html#cb500-1" aria-hidden="true" tabindex="-1"></a>geom_mean <span class="ot">&lt;-</span> <span class="cf">function</span>(x, y){</span>
<span id="cb500-2"><a href="functions.html#cb500-2" aria-hidden="true" tabindex="-1"></a>    a <span class="ot">&lt;-</span> <span class="fu">sqrt</span>(x<span class="sc">*</span>y)</span>
<span id="cb500-3"><a href="functions.html#cb500-3" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb500-4"><a href="functions.html#cb500-4" aria-hidden="true" tabindex="-1"></a><span class="fu">geom_mean</span>(<span class="dv">1</span>,<span class="dv">2</span>) <span class="co">#returns nothing</span></span>
<span id="cb500-5"><a href="functions.html#cb500-5" aria-hidden="true" tabindex="-1"></a>geom_mean <span class="ot">&lt;-</span> <span class="cf">function</span>(x, y){</span>
<span id="cb500-6"><a href="functions.html#cb500-6" aria-hidden="true" tabindex="-1"></a>    a <span class="ot">&lt;-</span> <span class="fu">sqrt</span>(x<span class="sc">*</span>y)</span>
<span id="cb500-7"><a href="functions.html#cb500-7" aria-hidden="true" tabindex="-1"></a>    a</span>
<span id="cb500-8"><a href="functions.html#cb500-8" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb500-9"><a href="functions.html#cb500-9" aria-hidden="true" tabindex="-1"></a><span class="fu">geom_mean</span>(<span class="dv">1</span>,<span class="dv">2</span>) <span class="co">#returns a</span></span></code></pre></div>
<pre><code>## [1] 1.414214</code></pre>
<p>The result of a function can be a list, a data.frame, a vector… or nothing. And you can attribute the result of a function to a variable:</p>
<div class="sourceCode" id="cb502"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb502-1"><a href="functions.html#cb502-1" aria-hidden="true" tabindex="-1"></a>person <span class="ot">&lt;-</span> <span class="cf">function</span>(name, age){</span>
<span id="cb502-2"><a href="functions.html#cb502-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">list</span>(<span class="at">name=</span>name, <span class="at">age=</span>age)</span>
<span id="cb502-3"><a href="functions.html#cb502-3" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb502-4"><a href="functions.html#cb502-4" aria-hidden="true" tabindex="-1"></a>joe <span class="ot">&lt;-</span> <span class="fu">person</span>(<span class="at">name=</span><span class="st">&quot;Joe&quot;</span>, <span class="at">age=</span><span class="dv">33</span>)</span>
<span id="cb502-5"><a href="functions.html#cb502-5" aria-hidden="true" tabindex="-1"></a>joe</span></code></pre></div>
<pre><code>## $name
## [1] &quot;Joe&quot;
## 
## $age
## [1] 33</code></pre>
<p>One can add default values to variables:</p>
<div class="sourceCode" id="cb504"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb504-1"><a href="functions.html#cb504-1" aria-hidden="true" tabindex="-1"></a>testfunc <span class="ot">&lt;-</span> <span class="cf">function</span>(x,<span class="at">y=</span><span class="dv">1</span>){</span>
<span id="cb504-2"><a href="functions.html#cb504-2" aria-hidden="true" tabindex="-1"></a>    x<span class="sc">*</span>y</span>
<span id="cb504-3"><a href="functions.html#cb504-3" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb504-4"><a href="functions.html#cb504-4" aria-hidden="true" tabindex="-1"></a><span class="fu">testfunc</span>(<span class="dv">1</span>)</span></code></pre></div>
<pre><code>## [1] 1</code></pre>
<div class="sourceCode" id="cb506"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb506-1"><a href="functions.html#cb506-1" aria-hidden="true" tabindex="-1"></a><span class="fu">testfunc</span>(<span class="dv">1</span>,<span class="at">y=</span><span class="dv">2</span>)</span></code></pre></div>
<pre><code>## [1] 2</code></pre>
<div class="sourceCode" id="cb508"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb508-1"><a href="functions.html#cb508-1" aria-hidden="true" tabindex="-1"></a><span class="fu">testfunc</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>,<span class="at">y=</span>.<span class="dv">1</span>)</span></code></pre></div>
<pre><code>## [1] 0.1 0.2 0.3</code></pre>
<p>And pass arguments to other functions:</p>
<div class="sourceCode" id="cb510"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb510-1"><a href="functions.html#cb510-1" aria-hidden="true" tabindex="-1"></a>testfunc2 <span class="ot">&lt;-</span> <span class="cf">function</span>(x,...){</span>
<span id="cb510-2"><a href="functions.html#cb510-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">head</span>(x,...)</span>
<span id="cb510-3"><a href="functions.html#cb510-3" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb510-4"><a href="functions.html#cb510-4" aria-hidden="true" tabindex="-1"></a><span class="fu">testfunc2</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">100</span>)</span></code></pre></div>
<pre><code>## [1] 1 2 3 4 5 6</code></pre>
<div class="sourceCode" id="cb512"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb512-1"><a href="functions.html#cb512-1" aria-hidden="true" tabindex="-1"></a><span class="fu">testfunc2</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">100</span>,<span class="dv">2</span>)</span></code></pre></div>
<pre><code>## [1] 1 2</code></pre>
<p>Or even pass a function as argument:</p>
<div class="sourceCode" id="cb514"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb514-1"><a href="functions.html#cb514-1" aria-hidden="true" tabindex="-1"></a>testfunc3 <span class="ot">&lt;-</span> <span class="cf">function</span>(FUN,...){</span>
<span id="cb514-2"><a href="functions.html#cb514-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">FUN</span>(...)</span>
<span id="cb514-3"><a href="functions.html#cb514-3" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb514-4"><a href="functions.html#cb514-4" aria-hidden="true" tabindex="-1"></a><span class="fu">testfunc3</span>(sum,<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>)</span></code></pre></div>
<pre><code>## [1] 55</code></pre>
<div class="sourceCode" id="cb516"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb516-1"><a href="functions.html#cb516-1" aria-hidden="true" tabindex="-1"></a><span class="fu">testfunc3</span>(plot, <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, <span class="fu">sin</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>), <span class="at">type=</span><span class="st">&quot;l&quot;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-50-1.png" width="100%" /></p>
</div>
<div id="interpolation-of-data" class="section level2" number="8.2">
<h2><span class="header-section-number">8.2</span> Interpolation of data</h2>
<p>It is possible to interpolate data through the <code class="sourceCode r"><span class="fu">approxfun</span>()</code> and <code class="sourceCode r"><span class="fu">splinefun</span>()</code> functions: while the former uses linear interpolation, the latter uses cubic splines (polynomials).</p>
<div class="sourceCode" id="cb517"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb517-1"><a href="functions.html#cb517-1" aria-hidden="true" tabindex="-1"></a>xmin <span class="ot">&lt;-</span> <span class="sc">-</span><span class="dv">2</span><span class="sc">*</span>pi; xmax <span class="ot">&lt;-</span> <span class="dv">2</span><span class="sc">*</span>pi</span>
<span id="cb517-2"><a href="functions.html#cb517-2" aria-hidden="true" tabindex="-1"></a>x  <span class="ot">&lt;-</span> <span class="fu">runif</span>(<span class="dv">30</span>, <span class="at">min=</span>xmin, <span class="at">max=</span>xmax)</span>
<span id="cb517-3"><a href="functions.html#cb517-3" aria-hidden="true" tabindex="-1"></a>xx <span class="ot">&lt;-</span> <span class="fu">seq</span>(xmin, xmax, .<span class="dv">1</span>)</span>
<span id="cb517-4"><a href="functions.html#cb517-4" aria-hidden="true" tabindex="-1"></a>y  <span class="ot">&lt;-</span> <span class="fu">sin</span>(x)</span>
<span id="cb517-5"><a href="functions.html#cb517-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Linear interpolation</span></span>
<span id="cb517-6"><a href="functions.html#cb517-6" aria-hidden="true" tabindex="-1"></a>lin_interp <span class="ot">&lt;-</span> <span class="fu">approxfun</span>(x,y)        <span class="co">#is a function</span></span>
<span id="cb517-7"><a href="functions.html#cb517-7" aria-hidden="true" tabindex="-1"></a><span class="fu">lin_interp</span>(<span class="dv">0</span>); <span class="fu">lin_interp</span>(pi)</span></code></pre></div>
<pre><code>## [1] -5.424802e-05</code></pre>
<pre><code>## [1] 0.0007360272</code></pre>
<div class="sourceCode" id="cb520"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb520-1"><a href="functions.html#cb520-1" aria-hidden="true" tabindex="-1"></a>yy_lin     <span class="ot">&lt;-</span> <span class="fu">approx</span>(x, y, <span class="at">xout=</span>xx) <span class="co">#is a list containing x and y</span></span>
<span id="cb520-2"><a href="functions.html#cb520-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb520-3"><a href="functions.html#cb520-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Cubic spline interpolation</span></span>
<span id="cb520-4"><a href="functions.html#cb520-4" aria-hidden="true" tabindex="-1"></a>spl_interp <span class="ot">&lt;-</span> <span class="fu">splinefun</span>(x,y)        <span class="co">#is a function</span></span>
<span id="cb520-5"><a href="functions.html#cb520-5" aria-hidden="true" tabindex="-1"></a>yy_spl     <span class="ot">&lt;-</span> <span class="fu">spline</span>(x, y, <span class="at">xout=</span>xx) <span class="co">#is a list containing x and y</span></span>
<span id="cb520-6"><a href="functions.html#cb520-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb520-7"><a href="functions.html#cb520-7" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">family =</span> <span class="st">&quot;Helvetica&quot;</span>, <span class="at">cex.lab=</span><span class="fl">1.5</span>, <span class="at">cex.axis=</span><span class="fl">1.4</span>, </span>
<span id="cb520-8"><a href="functions.html#cb520-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">mgp =</span> <span class="fu">c</span>(<span class="fl">2.4</span>, .<span class="dv">5</span>, <span class="dv">0</span>), <span class="at">tck=</span><span class="fl">0.02</span>, <span class="at">mar=</span><span class="fu">c</span>(<span class="dv">4</span>, <span class="dv">4</span>, <span class="dv">2</span>, .<span class="dv">5</span>), <span class="at">lwd=</span><span class="dv">2</span>, <span class="at">las=</span><span class="dv">1</span>)</span>
<span id="cb520-9"><a href="functions.html#cb520-9" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(x, y, <span class="at">pch=</span><span class="dv">16</span>, <span class="at">cex=</span><span class="dv">2</span>, <span class="at">ylim=</span><span class="fu">c</span>(<span class="sc">-</span><span class="dv">1</span>,<span class="fl">1.5</span>))</span>
<span id="cb520-10"><a href="functions.html#cb520-10" aria-hidden="true" tabindex="-1"></a><span class="fu">lines</span>(xx, <span class="fu">lin_interp</span>(xx), <span class="at">col=</span><span class="st">&quot;royalblue&quot;</span>) <span class="co"># equivalent to: lines(yy_lin, col=&quot;royalblue&quot;)</span></span>
<span id="cb520-11"><a href="functions.html#cb520-11" aria-hidden="true" tabindex="-1"></a><span class="fu">lines</span>(xx, <span class="fu">spl_interp</span>(xx), <span class="at">col=</span><span class="st">&quot;red&quot;</span>, <span class="at">lty=</span><span class="dv">2</span>)<span class="co"># equivalent to: lines(yy_spl, col=&quot;red&quot;)</span></span>
<span id="cb520-12"><a href="functions.html#cb520-12" aria-hidden="true" tabindex="-1"></a><span class="fu">legend</span>(<span class="st">&quot;topright&quot;</span>,</span>
<span id="cb520-13"><a href="functions.html#cb520-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">cex=</span><span class="fl">1.2</span>,</span>
<span id="cb520-14"><a href="functions.html#cb520-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">lty=</span><span class="fu">c</span>(<span class="cn">NA</span>, <span class="dv">1</span>, <span class="dv">2</span>),</span>
<span id="cb520-15"><a href="functions.html#cb520-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">lwd=</span><span class="fu">c</span>(<span class="cn">NA</span>, <span class="dv">2</span>, <span class="dv">2</span>),</span>
<span id="cb520-16"><a href="functions.html#cb520-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">pch=</span><span class="fu">c</span>(<span class="dv">16</span>, <span class="cn">NA</span>, <span class="cn">NA</span>),</span>
<span id="cb520-17"><a href="functions.html#cb520-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">col=</span><span class="fu">c</span>(<span class="st">&quot;black&quot;</span>, <span class="st">&quot;royalblue&quot;</span>, <span class="st">&quot;red&quot;</span>),</span>
<span id="cb520-18"><a href="functions.html#cb520-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">bty =</span> <span class="st">&quot;n&quot;</span>,</span>
<span id="cb520-19"><a href="functions.html#cb520-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend=</span><span class="fu">c</span>(<span class="st">&quot;&#39;Experimental&#39; points&quot;</span>, <span class="st">&quot;Linear interpolation&quot;</span>, <span class="st">&quot;Spline interpolation&quot;</span>)</span>
<span id="cb520-20"><a href="functions.html#cb520-20" aria-hidden="true" tabindex="-1"></a>    )</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-51-1.png" width="100%" /></p>
</div>
<div id="exo-functions" class="section level2" number="8.3">
<h2><span class="header-section-number">8.3</span> Exercises</h2>
<details>
<summary>
<strong>Exercise 1</strong>
</summary>
<p>Create the sinus cardinal function, <span class="math inline">\(f(x)=\sin(x)/x\)</span> for <span class="math inline">\(x\neq0\)</span> and <span class="math inline">\(f(0)=1\)</span>.</p>
<details>
<summary>
Solution
</summary>
<div class="sourceCode" id="cb521"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb521-1"><a href="functions.html#cb521-1" aria-hidden="true" tabindex="-1"></a>sinc <span class="ot">&lt;-</span> <span class="cf">function</span>(x, <span class="at">tol =</span> <span class="fu">sqrt</span>(.Machine<span class="sc">$</span>double.eps) ){</span>
<span id="cb521-2"><a href="functions.html#cb521-2" aria-hidden="true" tabindex="-1"></a>    <span class="co"># sinus cardinal</span></span>
<span id="cb521-3"><a href="functions.html#cb521-3" aria-hidden="true" tabindex="-1"></a>    y <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="dv">1</span>,<span class="fu">length</span>(x))</span>
<span id="cb521-4"><a href="functions.html#cb521-4" aria-hidden="true" tabindex="-1"></a>    b <span class="ot">&lt;-</span> <span class="fu">which</span>(<span class="fu">abs</span>(x)<span class="sc">&gt;</span>tol)</span>
<span id="cb521-5"><a href="functions.html#cb521-5" aria-hidden="true" tabindex="-1"></a>    y[b] <span class="ot">&lt;-</span> <span class="fu">sin</span>(x[b])<span class="sc">/</span>x[b]</span>
<span id="cb521-6"><a href="functions.html#cb521-6" aria-hidden="true" tabindex="-1"></a>    y</span>
<span id="cb521-7"><a href="functions.html#cb521-7" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb521-8"><a href="functions.html#cb521-8" aria-hidden="true" tabindex="-1"></a><span class="fu">sinc</span>(<span class="fu">seq</span>(<span class="sc">-</span>pi,pi,pi<span class="sc">/</span><span class="dv">4</span>))</span></code></pre></div>
<pre><code>## [1] 3.898172e-17 3.001054e-01 6.366198e-01 9.003163e-01 1.000000e+00
## [6] 9.003163e-01 6.366198e-01 3.001054e-01 3.898172e-17</code></pre>
<div class="sourceCode" id="cb523"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb523-1"><a href="functions.html#cb523-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="sc">-</span><span class="dv">8</span><span class="sc">*</span>pi,<span class="dv">8</span><span class="sc">*</span>pi,.<span class="dv">1</span>)</span>
<span id="cb523-2"><a href="functions.html#cb523-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(x, <span class="fu">sinc</span>(x), <span class="at">type=</span><span class="st">&quot;l&quot;</span>, <span class="at">lwd=</span><span class="dv">3</span>);<span class="fu">abline</span>(<span class="at">h=</span><span class="dv">0</span>,<span class="at">v=</span><span class="dv">0</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-52-1.png" width="100%" /></p>
</details>
</details>
<details>
<summary>
<strong>Exercise 2</strong>
</summary>
<ul>
<li>Write a function returning a normalized Gaussian function
<ul>
<li>Test that it is indeed normalized by numerically computing its integral</li>
</ul></li>
<li>Write a new function returning the sum of an arbitrary number of Gaussian functions</li>
</ul>
<details>
<summary>
Solution
</summary>
<div class="sourceCode" id="cb524"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb524-1"><a href="functions.html#cb524-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Write a function returning a normalized Gaussian function</span></span>
<span id="cb524-2"><a href="functions.html#cb524-2" aria-hidden="true" tabindex="-1"></a><span class="co"># look also at the dnorm() base function</span></span>
<span id="cb524-3"><a href="functions.html#cb524-3" aria-hidden="true" tabindex="-1"></a>Gaussian <span class="ot">&lt;-</span> <span class="cf">function</span>(x,x0,FWHM,<span class="at">A=</span><span class="dv">1</span>){</span>
<span id="cb524-4"><a href="functions.html#cb524-4" aria-hidden="true" tabindex="-1"></a>    <span class="fl">2.</span><span class="sc">*</span>A<span class="sc">*</span><span class="fu">sqrt</span>(<span class="dv">2</span><span class="sc">*</span><span class="fu">log</span>(<span class="dv">2</span>))<span class="sc">/</span><span class="fu">sqrt</span>(<span class="dv">2</span><span class="sc">*</span>pi)<span class="sc">/</span>FWHM<span class="sc">*</span><span class="fu">exp</span>(<span class="sc">-</span>(x<span class="sc">-</span>x0)<span class="sc">^</span><span class="dv">2</span><span class="sc">*</span><span class="dv">4</span><span class="sc">*</span><span class="fu">log</span>(<span class="dv">2</span>)<span class="sc">/</span>FWHM<span class="sc">^</span><span class="dv">2</span>)</span>
<span id="cb524-5"><a href="functions.html#cb524-5" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb524-6"><a href="functions.html#cb524-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Test that it is indeed normalized by numerically computing its integral</span></span>
<span id="cb524-7"><a href="functions.html#cb524-7" aria-hidden="true" tabindex="-1"></a>dx <span class="ot">&lt;-</span> .<span class="dv">01</span></span>
<span id="cb524-8"><a href="functions.html#cb524-8" aria-hidden="true" tabindex="-1"></a>x  <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="sc">-</span><span class="dv">10</span>,<span class="dv">10</span>,dx)</span>
<span id="cb524-9"><a href="functions.html#cb524-9" aria-hidden="true" tabindex="-1"></a>y  <span class="ot">&lt;-</span> <span class="fu">Gaussian</span>(x,<span class="dv">0</span>,<span class="dv">1</span>)</span>
<span id="cb524-10"><a href="functions.html#cb524-10" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(y<span class="sc">*</span>dx)</span>
<span id="cb524-11"><a href="functions.html#cb524-11" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">dnorm</span>(x,<span class="at">mean=</span><span class="dv">0</span>,<span class="at">sd=</span><span class="dv">1</span>)<span class="sc">*</span>dx)</span>
<span id="cb524-12"><a href="functions.html#cb524-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Write a new function returning the sum of an arbitrary number of Gaussian functions</span></span>
<span id="cb524-13"><a href="functions.html#cb524-13" aria-hidden="true" tabindex="-1"></a>sumGaussian1 <span class="ot">&lt;-</span> <span class="cf">function</span>(x,x0,FWHM,<span class="at">A=</span><span class="dv">1</span>){</span>
<span id="cb524-14"><a href="functions.html#cb524-14" aria-hidden="true" tabindex="-1"></a>    y <span class="ot">&lt;-</span> y0</span>
<span id="cb524-15"><a href="functions.html#cb524-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(x0)) {</span>
<span id="cb524-16"><a href="functions.html#cb524-16" aria-hidden="true" tabindex="-1"></a>      y <span class="ot">&lt;-</span> y <span class="sc">+</span> <span class="fu">Gaussian</span>(x,x0[i],FWHM[i],<span class="at">A=</span>A[i])</span>
<span id="cb524-17"><a href="functions.html#cb524-17" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb524-18"><a href="functions.html#cb524-18" aria-hidden="true" tabindex="-1"></a>    y</span>
<span id="cb524-19"><a href="functions.html#cb524-19" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb524-20"><a href="functions.html#cb524-20" aria-hidden="true" tabindex="-1"></a><span class="co"># handling bad entries and being more efficient</span></span>
<span id="cb524-21"><a href="functions.html#cb524-21" aria-hidden="true" tabindex="-1"></a>sumGaussian2 <span class="ot">&lt;-</span> <span class="cf">function</span>(x,x0,FWHM,<span class="at">A=</span><span class="dv">1</span>){</span>
<span id="cb524-22"><a href="functions.html#cb524-22" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(<span class="fu">length</span>(x0)<span class="sc">!=</span><span class="fu">length</span>(FWHM)) FWHM <span class="ot">&lt;-</span> <span class="fu">rep</span>(FWHM, <span class="at">length.out=</span><span class="fu">length</span>(x0))</span>
<span id="cb524-23"><a href="functions.html#cb524-23" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(<span class="fu">length</span>(x0)<span class="sc">!=</span><span class="fu">length</span>(A))    A    <span class="ot">&lt;-</span> <span class="fu">rep</span>(A,    <span class="at">length.out=</span><span class="fu">length</span>(x0))</span>
<span id="cb524-24"><a href="functions.html#cb524-24" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rowSums</span>(<span class="fu">sapply</span>(<span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(x0), <span class="cf">function</span>(i) {</span>
<span id="cb524-25"><a href="functions.html#cb524-25" aria-hidden="true" tabindex="-1"></a>          <span class="fu">Gaussian</span>(x,x0[i],FWHM[i],<span class="at">A=</span>A[i])</span>
<span id="cb524-26"><a href="functions.html#cb524-26" aria-hidden="true" tabindex="-1"></a>        }))</span>
<span id="cb524-27"><a href="functions.html#cb524-27" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
</details>
</details>
<details>
<summary>
<strong>Exercise 3</strong>
</summary>
<p>Write a function returning a <code class="sourceCode r">tibble</code> (created if not supplied, incremented if supplied) containing the name, age, gender and country of origin of the people in the class. Print it. Play around with the obtained tibble to make some statistics about the class population.</p>
<details>
<summary>
Solution
</summary>
<div class="sourceCode" id="cb525"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb525-1"><a href="functions.html#cb525-1" aria-hidden="true" tabindex="-1"></a>people <span class="ot">&lt;-</span> <span class="cf">function</span>(<span class="at">ppl=</span>tibble<span class="sc">::</span><span class="fu">tibble</span>(), <span class="at">name=</span><span class="cn">NA</span>, <span class="at">age=</span><span class="cn">NA</span>, <span class="at">gender=</span><span class="cn">NA</span>, <span class="at">origin=</span><span class="cn">NA</span>){</span>
<span id="cb525-2"><a href="functions.html#cb525-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">library</span>(tibble)</span>
<span id="cb525-3"><a href="functions.html#cb525-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">library</span>(dplyr)</span>
<span id="cb525-4"><a href="functions.html#cb525-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">bind_rows</span>(ppl, <span class="fu">tibble</span>(<span class="at">name=</span>name, <span class="at">age=</span>age, <span class="at">gender=</span>gender, <span class="at">origin=</span>origin))</span>
<span id="cb525-5"><a href="functions.html#cb525-5" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb525-6"><a href="functions.html#cb525-6" aria-hidden="true" tabindex="-1"></a>ppl <span class="ot">&lt;-</span> <span class="fu">people</span>(<span class="at">name=</span><span class="st">&quot;Colin&quot;</span>, <span class="at">age=</span><span class="dv">33</span>, <span class="at">gender=</span><span class="st">&quot;Male&quot;</span>, <span class="at">origin=</span><span class="st">&quot;France&quot;</span>)</span>
<span id="cb525-7"><a href="functions.html#cb525-7" aria-hidden="true" tabindex="-1"></a>ppl <span class="ot">&lt;-</span> <span class="fu">people</span>(<span class="at">ppl=</span>ppl, <span class="at">name=</span><span class="st">&quot;Vincent&quot;</span>, <span class="at">age=</span><span class="dv">39</span>, <span class="at">gender=</span><span class="st">&quot;Male&quot;</span>, <span class="at">origin=</span><span class="st">&quot;France&quot;</span>)</span>
<span id="cb525-8"><a href="functions.html#cb525-8" aria-hidden="true" tabindex="-1"></a>ppl</span></code></pre></div>
<pre><code>## # A tibble: 2 x 4
##   name      age gender origin
##   &lt;chr&gt;   &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt; 
## 1 Colin      33 Male   France
## 2 Vincent    39 Male   France</code></pre>
</details>
</details>
<p><br>
<br></p>
<p><br>
<br>
<br>
<br>
<br></p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="lists.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="conditional-actions-and-loops.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": null,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": null,
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": null,
"scroll_highlight": true
},
"toolbar": {
"position": "fixed"
},
"search": true
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
